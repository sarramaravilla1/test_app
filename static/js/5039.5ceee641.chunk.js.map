{"version":3,"file":"static/js/5039.5ceee641.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/rest/query/operations/queryUtils.js","../node_modules/@arcgis/core/rest/query/operations/query.js","../node_modules/@arcgis/core/layers/support/StreamConnection.js","../node_modules/@arcgis/core/layers/graphics/sources/connections/WebSocketConnection.js","../node_modules/@arcgis/core/layers/graphics/sources/connections/GeoEventConnection.js","../node_modules/@arcgis/core/layers/support/ClientSideConnection.js","../node_modules/@arcgis/core/layers/graphics/sources/connections/createConnection.js","../node_modules/@arcgis/core/rest/operations/urlUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{getJsonType as e}from\"../../../geometry/support/jsonUtils.js\";import{srToRESTValue as t}from\"../../../geometry/support/spatialReferenceUtils.js\";function i(e,t){if(t&&\"extent\"===e.type)return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&\"point\"===e.type)return`${e.x},${e.y}`;const i=e.toJSON();return delete i.spatialReference,JSON.stringify(i)}function r(r,n,a){const{geometry:l}=r,s=r.compactGeometryEnabled??!1,o=r.toJSON();delete o.compactGeometryEnabled,delete o.defaultSpatialReferenceEnabled;const u=o;let d,c,y;if(l&&(c=l.spatialReference,y=t(c),u.geometryType=e(l),u.geometry=i(l,s),u.inSR=y),o.groupByFieldsForStatistics&&(u.groupByFieldsForStatistics=o.groupByFieldsForStatistics.join(\",\")),o.objectIds)switch(a?.uniqueIdFields?.length){case void 0:u.objectIds=o.objectIds.join(\",\");break;case 1:u.uniqueIds=JSON.stringify(o.objectIds),delete u.objectIds;break;default:u.uniqueIds=JSON.stringify(o.objectIds.map(e=>JSON.parse(e))),delete u.objectIds}if(o.orderByFields&&(u.orderByFields=o.orderByFields.join(\",\")),!o.outFields||!o.returnDistinctValues&&(n?.returnCountOnly||n?.returnExtentOnly||n?.returnIdsOnly)?delete u.outFields:o.outFields.includes(\"*\")?u.outFields=\"*\":u.outFields=o.outFields.join(\",\"),o.outSR?(u.outSR=t(o.outSR),d=r.outSpatialReference):l&&(o.returnGeometry||o.returnCentroid)&&(u.outSR=u.inSR,d=c),o.returnGeometry&&delete o.returnGeometry,o.outStatistics&&(u.outStatistics=JSON.stringify(o.outStatistics)),o.fullText&&(u.fullText=JSON.stringify(o.fullText)),o.pixelSize&&(u.pixelSize=JSON.stringify(o.pixelSize)),o.quantizationParameters&&(r.defaultSpatialReferenceEnabled&&null!=c&&null!=r.quantizationParameters?.extent&&c.equals(r.quantizationParameters.extent.spatialReference)&&delete o.quantizationParameters.extent.spatialReference,u.quantizationParameters=JSON.stringify(o.quantizationParameters)),o.parameterValues&&(u.parameterValues=JSON.stringify(o.parameterValues)),o.rangeValues&&(u.rangeValues=JSON.stringify(o.rangeValues)),o.dynamicDataSource&&(u.layer=JSON.stringify({source:o.dynamicDataSource}),delete o.dynamicDataSource),o.timeExtent){const e=o.timeExtent,{start:t,end:i}=e;null==t&&null==i||(u.time=t===i?t:`${t??\"null\"},${i??\"null\"}`),delete o.timeExtent}return r.defaultSpatialReferenceEnabled&&null!=c&&null!=d&&c.equals(d)&&(u.defaultSR=u.inSR,delete u.inSR,delete u.outSR),u}export{i as encodeGeometry,r as queryLikeToQueryStringParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport t from\"../../../request.js\";import{urlToObject as r,join as n}from\"../../../core/urlUtils.js\";import{normalizeCentralMeridian as e}from\"../../../geometry/support/normalizeUtils.js\";import{mapParameters as o}from\"../../operations/urlUtils.js\";import{parsePBFFeatureQuery as u}from\"./pbfQueryUtils.js\";import{queryLikeToQueryStringParameters as s}from\"./queryUtils.js\";import{applyFeatureSetZUnitScaling as i}from\"./queryZScale.js\";const a=\"Layer does not support extent calculation.\";function l(t,r,n){return s(t,r,n)}async function y(t,r,n,e,o){const u=r.timeExtent?.isEmpty?{data:{features:[]}}:await j(t,r,\"json\",e,void 0,o);return i(r,n,u.data),u}async function f(t,r,n,e,o){if(r.timeExtent?.isEmpty)return{data:n.createFeatureResult()};const s=await c(t,r,e,o),i=s;return i.data=u(s.data,n),i}function c(t,r,n,e){return j(t,r,\"pbf\",n,void 0,e)}function m(t,r,n,e){return r.timeExtent?.isEmpty?Promise.resolve({data:{objectIds:[]}}):j(t,r,\"json\",n,{returnIdsOnly:!0},e)}function p(t,r,n,e){return r.timeExtent?.isEmpty?Promise.resolve({data:{count:0}}):j(t,r,\"json\",n,{returnIdsOnly:!0,returnCountOnly:!0},e)}async function d(t,r,n){if(r.timeExtent?.isEmpty)return{data:{count:0,extent:null}};const e=await j(t,r,\"json\",n,{returnExtentOnly:!0,returnCountOnly:!0}),o=e.data;if(o.hasOwnProperty(\"extent\"))return e;if(o.features)throw new Error(a);if(o.hasOwnProperty(\"count\"))throw new Error(a);return e}function O(t,r){if(!t.returnIdsOnly||!r.uniqueIdFields)return t;const n={...t,returnUniqueIdsOnly:!0};return delete n.returnIdsOnly,n}async function j(u,s,i,a={},y={},f={}){const c=\"string\"==typeof u?r(u):u,m=s.geometry?[s.geometry]:[],p=await e(m,null,{signal:a.signal}),d=p?.[0];null!=d&&((s=s.clone()).geometry=d);const j=o({...c.query,f:i,...O(y,f),...l(s,y,f)});return t(n(c.path,E(s,y)?\"query3d\":\"query\"),{...a,responseType:\"pbf\"===i?\"array-buffer\":\"json\",query:{...j,...a.query}})}function E(t,r){return null!=t.formatOf3DObjects&&!(r.returnCountOnly||r.returnExtentOnly||r.returnIdsOnly)}export{y as executeQuery,p as executeQueryForCount,d as executeQueryForExtent,m as executeQueryForIds,f as executeQueryPBF,c as executeQueryPBFBuffer,l as queryToQueryStringParameters,j as runQuery};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as r}from\"tslib\";import e from\"../../core/Error.js\";import{EventedAccessor as o}from\"../../core/Evented.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";let i=class extends o{destroy(){this.emit(\"destroy\")}get connectionError(){return this.errorString?new e(\"stream-connection\",this.errorString):null}onFeature(r){this.emit(\"data-received\",r)}onMessage(r){this.emit(\"message-received\",r)}};r([t({readOnly:!0})],i.prototype,\"connectionError\",null),i=r([s(\"esri.layers.support.StreamConnection\")],i);export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../../../../core/Error.js\";import o from\"../../../../core/Logger.js\";import{after as s,createResolver as r}from\"../../../../core/promiseUtils.js\";import{addQueryParameters as n}from\"../../../../core/urlUtils.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/RandomLCG.js\";import{subclass as c}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{getGeometryZScaler as a}from\"../../../../geometry/support/zscale.js\";import l from\"../../../support/StreamConnection.js\";let h=class extends l{constructor(e){super({}),this._outstandingMessages=[],this.errorString=null;const{geometryType:t,spatialReference:o,sourceSpatialReference:s}=e;this._config=e,this._featureZScaler=a(t,s,o),this._open()}normalizeCtorArgs(){return{}}async _open(){await this._tryCreateWebSocket(),this.destroyed||await this._handshake()}destroy(){super.destroy(),null!=this._websocket&&(this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.onerror=null,this._websocket.onmessage=null,this._websocket.close()),this._websocket=null}get connectionStatus(){if(null==this._websocket)return\"disconnected\";switch(this._websocket.readyState){case 0:case 1:return\"connected\";case 2:case 3:return\"disconnected\"}}sendMessageToSocket(e){null!=this._websocket?this._websocket.send(JSON.stringify(e)):this._outstandingMessages.push(e)}sendMessageToClient(e){this._onMessage(e)}updateCustomParameters(e){this._config.customParameters=e,null!=this._websocket&&this._websocket.close()}async _tryCreateWebSocket(e=this._config.source.path,r=1e3,i=0){try{if(this.destroyed)return;const t=n(e,this._config.customParameters??{});this._websocket=await this._createWebSocket(t),this.notifyChange(\"connectionStatus\")}catch(c){const n=r/1e3;return this._config.maxReconnectionAttempts&&i>=this._config.maxReconnectionAttempts?(o.getLogger(this).error(new t(\"websocket-connection\",\"Exceeded maxReconnectionAttempts attempts. No further attempts will be made\")),void this.destroy()):(o.getLogger(this).error(new t(\"websocket-connection\",`Failed to connect. Attempting to reconnect in ${n}s`,c)),await s(r),this._tryCreateWebSocket(e,Math.min(1.5*r,1e3*this._config.maxReconnectionInterval),i+1))}}_setWebSocketJSONParseHandler(e){e.onmessage=e=>{try{const t=JSON.parse(e.data);this._onMessage(t)}catch(s){return void o.getLogger(this).error(new t(\"websocket-connection\",\"Failed to parse message, invalid JSON\",{error:s}))}}}_createWebSocket(e){return new Promise((t,o)=>{const s=new WebSocket(e);s.onopen=()=>{if(s.onopen=null,this.destroyed)return s.onclose=null,void s.close();s.onclose=e=>this._onClose(e),s.onerror=e=>this._onError(e),this._setWebSocketJSONParseHandler(s),t(s)},s.onclose=e=>{s.onopen=s.onclose=null,o(e)}})}async _handshake(e=1e4){const s=this._websocket;if(null==s)return;const n=r(),i=s.onmessage,{filter:c,outFields:a,spatialReference:l}=this._config;return n.timeout(e),s.onmessage=e=>{let r=null;try{r=JSON.parse(e.data)}catch(h){}r&&\"object\"==typeof r||(o.getLogger(this).error(new t(\"websocket-connection\",\"Protocol violation. Handshake failed - malformed message\",e.data)),n.reject(),this.destroy()),r.spatialReference?.wkid!==l?.wkid&&(o.getLogger(this).error(new t(\"websocket-connection\",`Protocol violation. Handshake failed - expected wkid of ${l.wkid}`,e.data)),n.reject(),this.destroy()),\"json\"!==r.format&&(o.getLogger(this).error(new t(\"websocket-connection\",\"Protocol violation. Handshake failed - format is not set\",e.data)),n.reject(),this.destroy()),c&&r.filter!==c&&o.getLogger(this).error(new t(\"websocket-connection\",\"Tried to set filter, but server doesn't support it\")),a&&r.outFields!==a&&o.getLogger(this).error(new t(\"websocket-connection\",\"Tried to set outFields, but server doesn't support it\")),s.onmessage=i;for(const t of this._outstandingMessages)s.send(JSON.stringify(t));this._outstandingMessages=[],n.resolve()},s.send(JSON.stringify({filter:c,outFields:a,format:\"json\",spatialReference:{wkid:l.wkid}})),n.promise}_onMessage(e){if(this.onMessage(e),\"type\"in e)switch(e.type){case\"features\":case\"featureResult\":for(const t of e.features)null!=this._featureZScaler&&this._featureZScaler(t.geometry),this.onFeature(t)}}_onError(e){const t=\"Encountered an error over WebSocket connection\";this._set(\"errorString\",t),o.getLogger(this).error(\"websocket-connection\",t)}_onClose(e){this._websocket=null,this.notifyChange(\"connectionStatus\"),1e3!==e.code&&o.getLogger(this).error(\"websocket-connection\",`WebSocket closed unexpectedly with error code ${e.code}`),this.destroyed||this._open()}};e([i()],h.prototype,\"connectionStatus\",null),e([i()],h.prototype,\"errorString\",void 0),h=e([c(\"esri.layers.graphics.sources.connections.WebSocketConnection\")],h);export{h as WebSocketConnection};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../../../../request.js\";import r from\"../../../../core/Error.js\";import i from\"../../../../core/Logger.js\";import{createResolver as o}from\"../../../../core/promiseUtils.js\";import{addQueryParameters as s}from\"../../../../core/urlUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/RandomLCG.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import a from\"../../../../geometry/SpatialReference.js\";import{fromJSON as c}from\"../../../../geometry/support/jsonUtils.js\";import{WebSocketConnection as u}from\"./WebSocketConnection.js\";import{executeQuery as l}from\"../../../../rest/query/operations/query.js\";import f from\"../../../../rest/support/Query.js\";const h=1e4,d={maxQueryDepth:5,maxRecordCountFactor:3};let g=class extends u{constructor(e){super({...d,...e}),this._buddyServicesQuery=null,this._relatedFeatures=null}async _open(){const e=await this._fetchServiceDefinition(this._config.source);e.timeInfo.trackIdField||i.getLogger(this).warn(\"GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.\");const t=this._fetchWebSocketUrl(e.streamUrls,this._config.spatialReference);this._buddyServicesQuery||(this._buddyServicesQuery=this._queryBuddyServices()),await this._buddyServicesQuery,await this._tryCreateWebSocket(t);const{filter:r,outFields:o}=this._config;this.destroyed||this._setFilter(r,o)}_onMessage(e){if(\"attributes\"in e){let o;try{o=this._enrich(e),null!=this._featureZScaler&&this._featureZScaler(o.geometry)}catch(t){return void i.getLogger(this).error(new r(\"geoevent-connection\",\"Failed to parse message\",t))}this.onFeature(o)}else this.onMessage(e)}async _fetchServiceDefinition(e){const r={f:\"json\",...this._config.customParameters},i=t(e.path,{query:r,responseType:\"json\"}),o=(await i).data;return this._serviceDefinition=o,o}_fetchWebSocketUrl(e,t){const r=e[0],{urls:i,token:o}=r,n=this._inferWebSocketBaseUrl(i);return s(`${n}/subscribe`,{outSR:\"\"+t.wkid,token:o})}_inferWebSocketBaseUrl(e){if(1===e.length)return e[0];for(const t of e)if(t.includes(\"wss\"))return t;return i.getLogger(this).error(new r(\"geoevent-connection\",\"Unable to infer WebSocket url\",e)),null}async _setFilter(e,t){const s=this._websocket;if(null==s||null==e&&null==t)return;const n=JSON.stringify({filter:this._serializeFilter(e,t)});let a=!1;const c=o(),u=()=>{a||(this.destroyed||this._websocket!==s||i.getLogger(this).error(new r(\"geoevent-connection\",\"Server timed out when setting filter\")),c.reject())},l=e=>{const t=JSON.parse(e.data);t.filter&&(t.error&&(i.getLogger(this).error(new r(\"geoevent-connection\",\"Failed to set service filter\",t.error)),this._set(\"errorString\",`Could not set service filter - ${t.error}`),c.reject(t.error)),this._setWebSocketJSONParseHandler(s),a=!0,c.resolve())};return s.onmessage=l,s.send(n),setTimeout(u,h),c.promise}_serializeFilter(e,t){const o={};if(null==e&&null==t)return o;if(e?.geometry)try{const t=c(e.geometry);if(\"extent\"!==t.type)throw new r(\"geoevent-connection\",`Expected extent but found type ${t.type}`);o.geometry=JSON.stringify(t.shiftCentralMeridian())}catch(s){i.getLogger(this).error(new r(\"geoevent-connection\",\"Encountered an error when setting connection geometryDefinition\",s))}return e?.where&&\"1 = 1\"!==e.where&&\"1=1\"!==e.where&&(o.where=e.where),null!=t&&(o.outFields=t.join(\",\")),o}_enrich(e){if(!this._relatedFeatures)return e;const t=this._serviceDefinition.relatedFeatures.joinField,o=e.attributes[t],s=this._relatedFeatures.get(o);if(!s)return i.getLogger(this).warn(\"geoevent-connection\",\"Feature join failed. Is the join field configured correctly?\",e),e;const{attributes:n,geometry:a}=s;for(const r in n)e.attributes[r]=n[r];return a&&(e.geometry=a),e.geometry||e.centroid||i.getLogger(this).error(new r(\"geoevent-connection\",\"Found malformed feature - no geometry found\",e)),e}async _queryBuddyServices(){try{const{relatedFeatures:e,keepLatestArchive:t}=this._serviceDefinition,r=this._queryRelatedFeatures(e),i=this._queryArchive(t);await r;const o=await i;if(!o)return;for(const s of o.features)this.onFeature(this._enrich(s))}catch(e){i.getLogger(this).error(new r(\"geoevent-connection\",\"Encountered an error when querying buddy services\",{error:e}))}}async _queryRelatedFeatures(e){if(!e)return;const t=await this._queryBuddy(e.featuresUrl);this._addRelatedFeatures(t)}async _queryArchive(e){if(e)return this._queryBuddy(e.featuresUrl)}async _queryBuddy(e){const t=new((await import(\"../../../FeatureLayer.js\")).default)({url:e}),{capabilities:r}=await t.load(),i=r.query.supportsMaxRecordCountFactor,o=r.query.supportsPagination,s=r.query.supportsCentroid,n=this._config.maxRecordCountFactor,c=t.capabilities.query.maxRecordCount,u=i?c*n:c,h=new f;if(h.outFields=this._config.outFields??[\"*\"],h.where=this._config.filter?.where??\"1=1\",h.returnGeometry=!0,h.returnExceededLimitFeatures=!0,h.outSpatialReference=a.fromJSON(this._config.spatialReference),s&&(h.returnCentroid=!0),i&&(h.maxRecordCountFactor=n),o)return h.num=u,t.destroy(),this._queryPages(e,h);const d=await l(e,h,this._config.sourceSpatialReference);return t.destroy(),d.data}async _queryPages(e,t,r=[],i=0){t.start=null!=t.num?i*t.num:null;const{data:o}=await l(e,t,this._config.sourceSpatialReference);return o.exceededTransferLimit&&i<(this._config.maxQueryDepth??0)?(o.features.forEach(e=>r.push(e)),this._queryPages(e,t,r,i+1)):(r.forEach(e=>o.features.push(e)),o)}_addRelatedFeatures(e){const t=new Map,r=e.features,i=this._serviceDefinition.relatedFeatures.joinField;for(const o of r){const e=o.attributes[i];t.set(e,o)}this._relatedFeatures=t}};g=e([n(\"esri.layers.graphics.sources.connections.GeoEventConnection\")],g);export{g as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import{getGeometryZScaler as o}from\"../../geometry/support/zscale.js\";import s from\"./StreamConnection.js\";let a=class extends s{constructor(e){super({}),this.connectionStatus=\"connected\",this.errorString=null;const{geometryType:r,spatialReference:t,sourceSpatialReference:s}=e;this._featureZScaler=o(r,s,t)}normalizeCtorArgs(){return{}}updateCustomParameters(e){}sendMessageToSocket(e){}sendMessageToClient(e){if(\"type\"in e)switch(e.type){case\"features\":case\"featureResult\":for(const r of e.features)null!=this._featureZScaler&&this._featureZScaler(r.geometry),this.onFeature(r)}this.onMessage(e)}};e([r()],a.prototype,\"connectionStatus\",void 0),e([r()],a.prototype,\"errorString\",void 0),a=e([t(\"esri.layers.support.ClientSideConnection\")],a);export{a as ClientSideConnection};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"./GeoEventConnection.js\";import{WebSocketConnection as t}from\"./WebSocketConnection.js\";import{ClientSideConnection as n}from\"../../../support/ClientSideConnection.js\";function o(e,t){if(null==e&&null==t)return null;const n={};return null!=t&&(n.geometry=t),null!=e&&(n.where=e),n}function r(r,i,s,c,l,u,a,m,p){const f={source:r,sourceSpatialReference:i,spatialReference:s,geometryType:c,filter:o(l,u),maxReconnectionAttempts:a,maxReconnectionInterval:m,customParameters:p};if(!r)return new n(f);return r.path.startsWith(\"wss://\")||r.path.startsWith(\"ws://\")?new t(f):new e(f)}export{r as createConnection};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nfunction t(n){const o={};for(const e in n){if(\"declaredClass\"===e)continue;const r=n[e];if(null!=r&&\"function\"!=typeof r)if(Array.isArray(r)){o[e]=[];for(let n=0;n<r.length;n++)o[e][n]=t(r[n])}else\"object\"==typeof r?r.toJSON&&(o[e]=JSON.stringify(r)):o[e]=r}return o}export{t as mapParameters};\n"],"names":["r","n","a","_r$compactGeometryEna","_a$uniqueIdFields","_r$quantizationParame","geometry","l","s","compactGeometryEnabled","o","toJSON","defaultSpatialReferenceEnabled","u","d","c","y","spatialReference","t","geometryType","e","type","concat","xmin","ymin","xmax","ymax","x","i","JSON","stringify","inSR","groupByFieldsForStatistics","join","objectIds","uniqueIdFields","length","uniqueIds","map","parse","orderByFields","outFields","returnDistinctValues","returnCountOnly","returnExtentOnly","returnIdsOnly","includes","outSR","outSpatialReference","returnGeometry","returnCentroid","outStatistics","fullText","pixelSize","quantizationParameters","extent","equals","parameterValues","rangeValues","dynamicDataSource","layer","source","timeExtent","start","end","time","defaultSR","async","_r$timeExtent","isEmpty","data","features","j","f","_r$timeExtent2","createFeatureResult","m","_r$timeExtent3","Promise","resolve","p","_r$timeExtent4","count","_r$timeExtent5","hasOwnProperty","Error","arguments","undefined","signal","clone","_objectSpread","query","returnUniqueIdsOnly","O","path","formatOf3DObjects","E","responseType","destroy","this","emit","connectionError","errorString","onFeature","onMessage","readOnly","prototype","h","constructor","super","_outstandingMessages","sourceSpatialReference","_config","_featureZScaler","_open","normalizeCtorArgs","_tryCreateWebSocket","destroyed","_handshake","_websocket","onopen","onclose","onerror","onmessage","close","connectionStatus","readyState","sendMessageToSocket","send","push","sendMessageToClient","_onMessage","updateCustomParameters","customParameters","_this$_config$customP","_createWebSocket","notifyChange","maxReconnectionAttempts","getLogger","error","Math","min","maxReconnectionInterval","_setWebSocketJSONParseHandler","WebSocket","_onClose","_onError","filter","timeout","_r$spatialReference","reject","wkid","format","promise","_set","code","maxQueryDepth","maxRecordCountFactor","g","_buddyServicesQuery","_relatedFeatures","_fetchServiceDefinition","timeInfo","trackIdField","warn","_fetchWebSocketUrl","streamUrls","_queryBuddyServices","_setFilter","_enrich","_serviceDefinition","urls","token","_inferWebSocketBaseUrl","_serializeFilter","setTimeout","shiftCentralMeridian","where","relatedFeatures","joinField","attributes","get","centroid","keepLatestArchive","_queryRelatedFeatures","_queryArchive","_queryBuddy","featuresUrl","_addRelatedFeatures","_this$_config$outFiel","_this$_config$filter$","_this$_config$filter","default","url","capabilities","load","supportsMaxRecordCountFactor","supportsPagination","supportsCentroid","maxRecordCount","returnExceededLimitFeatures","fromJSON","num","_queryPages","_this$_config$maxQuer","exceededTransferLimit","forEach","Map","set","startsWith","Array","isArray"],"sourceRoot":""}