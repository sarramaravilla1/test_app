{"version":3,"file":"static/js/2843.f8102065.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/interactive/snapping/FeatureSnappingSourceInfo.js","../node_modules/@arcgis/core/views/interactive/snapping/FeatureSnappingEngine.js","../node_modules/@arcgis/core/core/mapCollectionUtils.js","../node_modules/@arcgis/core/layers/support/floorFilterUtils.js","../node_modules/@arcgis/core/views/support/layerViewUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../../../core/Accessor.js\";import has from\"../../../core/has.js\";import r from\"../../../core/Logger.js\";import{watch as i,syncAndInitial as l}from\"../../../core/reactiveUtils.js\";import{sqlAnd as s}from\"../../../core/sql.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/RandomLCG.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import n from\"../../../layers/support/FeatureFilter.js\";import{getFloorFilterClause as u}from\"../../../layers/support/floorFilterUtils.js\";import{isSubtypeGroupLayer as p,isFeatureLayer as d}from\"../../../layers/support/layerUtils.js\";import{isUtilityNetworkWebMap as c}from\"./snappingUtils.js\";import{scaleBoundsPredicate as y}from\"../../support/layerViewUtils.js\";let f=class extends t{set attributeRulesEnabled(e){this._set(\"attributeRulesEnabled\",e),e&&this.loadRules()}get layerView(){return this.view?.allLayerViews?.find(e=>e.layer===this.layer)}get valid(){const{_valid:e,snappingSource:t,layer:r}=this;return!(!t||!r)&&e}get subtypeFilter(){const{layer:e,snappingSource:t}=this;if(!p(e)||!e.subtypes?.length||!t)return{mode:\"not-in-use\",filter:null};const r=t.layerSource.sublayerSources.filter(e=>e.enabled&&e.layer.visible&&y(this.view?.scale,e.layer.effectiveScaleRange.minScale,e.layer.effectiveScaleRange.maxScale)).map(e=>e.layer.subtypeCode);if(!r.length)return{mode:\"none-visible\",filter:null};if(r.length===e.subtypes.length)return{mode:\"all-visible\",filter:null};const i=e.fieldsIndex.get(e.subtypeField)?.name??e.subtypeField;return 1===r.length?{mode:\"in-use\",filter:`${i} = ${r.getItemAt(0)}`}:{mode:\"in-use\",filter:`${i} IN (${r.join(\", \")})`}}get floorFilter(){const{view:e,layer:t}=this;return e&&t?u({view:e,layer:t}):null}constructor(e){super(e),this.layer=null,this.snappingSource=null,this.rulesTable=null,this._valid=null}initialize(){if(!this.snappingSource||!this.layer)return void(this._valid=!1);const{layer:e,snappingSource:t}=this;if(\"refresh\"in e){const r=e;this.addHandles(r.on(\"refresh\",()=>t.refresh()))}this.loadRules(),this.addHandles([i(()=>t.updating,e=>t.layerSource.updating=e,l),i(()=>t.availability,e=>t.layerSource.availability=e,l)])}getFetchCandidatesParameters(e,t,r){if(!this.valid)return[];const{layer:i,layerView:l,floorFilter:o,rulesTable:a,subtypeFilter:u}=this,y={distance:r,mode:this.view?.type??\"2d\",point:e,coordinateHelper:t.coordinateHelper,...h(),filter:l&&\"filter\"in l?l.filter:null};if(o&&(y.filter=m(y.filter,o)),\"not-in-use\"!==u.mode&&\"all-visible\"!==u.mode){if(\"none-visible\"===u.mode)return[];y.filter?y.filter.where=s(y.filter.where,u.mode):y.filter=new n({where:u.filter})}if(!this.attributeRulesEnabled)return[y];const f=t.feature,v=\"subtype-sublayer\"===f?.sourceLayer?.type?f.sourceLayer.parent:f?.sourceLayer;if(a&&f&&c(this.view?.map)&&(d(i)||p(i))&&(d(v)||p(v))&&this.view.map.utilityNetworks?.find(e=>e.isUtilityLayer(v))){if(\"loaded\"!==a.loadStatus)return[];const e=[],t=i.layerId,r=a.getFeatureSQL(v,f)?.[t];if(!r)return[];const l=r.anyVertex;let s=r.endVertex;return s&&l&&s===l&&(s=\"\"),s&&e.push({...y,returnEdge:!1,vertexMode:\"ends\",filter:m(y.filter,s)}),l&&e.push({...y,returnEdge:has(\"snapping-include-edges-when-applying-any-vertex-rule\")??!1,vertexMode:\"all\",filter:m(y.filter,l)}),e}return[y]}async loadRules(){this._valid=null;const{layer:e,view:t,attributeRulesEnabled:i}=this;if(i&&e&&t&&c(t?.map)&&(d(e)||p(e)))try{await Promise.allSettled(t.map.utilityNetworks?.map(e=>e.load())??[]);const r=t.map.utilityNetworks?.find(t=>t.isUtilityLayer(e));r&&(this.rulesTable=await r.getRulesTable(),await(this.rulesTable?.load()))}catch(l){return this._valid=!1,void r.getLogger(\"esri.views.interactive.snapping.FeatureSnappingSourceInfo\").error(\"Failed to load rules table for snapping source\",e.title)}this._valid=!0}remove(){this.destroy()}destroy(){this.snappingSource?.destroy()}};function h(){return{returnEdge:!0,vertexMode:\"all\"}}function m(e,t){return null==e?new n({where:t}):e.where?new n({where:s(e.where,t)}):new n({where:t})}e([o({constructOnly:!0})],f.prototype,\"layer\",void 0),e([o({constructOnly:!0})],f.prototype,\"snappingSource\",void 0),e([o({constructOnly:!0})],f.prototype,\"view\",void 0),e([o({value:!1})],f.prototype,\"attributeRulesEnabled\",null),e([o()],f.prototype,\"layerView\",null),e([o()],f.prototype,\"rulesTable\",void 0),e([o()],f.prototype,\"valid\",null),e([o()],f.prototype,\"subtypeFilter\",null),e([o()],f.prototype,\"floorFilter\",null),e([o()],f.prototype,\"_valid\",void 0),f=e([a(\"esri.views.interactive.snapping.FeatureSnappingSourceInfo\")],f);export{f as FeatureSnappingSourceInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../../../core/Accessor.js\";import{isSome as r}from\"../../../core/arrayUtils.js\";import{destroyHandle as a}from\"../../../core/handleUtils.js\";import\"../../../core/has.js\";import{mapCollectionAsync as n}from\"../../../core/mapCollectionUtils.js\";import{allSettledValues as s,throwIfAborted as i}from\"../../../core/promiseUtils.js\";import{watch as o,sync as c}from\"../../../core/reactiveUtils.js\";import{getMetersPerUnitForSR as u,getMetersPerVerticalUnitForSR as l}from\"../../../core/unitUtils.js\";import{property as p}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/Logger.js\";import{subclass as d}from\"../../../core/accessorSupport/decorators/subclass.js\";import{squaredDistance as m}from\"../../../core/libs/gl-matrix-2/math/vec2.js\";import{d as S,s as g}from\"../../../chunks/vec32.js\";import{create as h}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{getEpsilon as f}from\"../../../core/libs/gl-matrix-2/math/common.js\";import{UpdatingHandles as y}from\"../../../core/support/UpdatingHandles.js\";import{absoluteHeightElevationInfo as _}from\"../../../support/elevationInfoUtils.js\";import{VerticalHalfPlaneConstraint as v}from\"../sketch/constraints.js\";import{fromAnyMapPoint as w,asVec2 as j,markAsTarget as F}from\"../sketch/normalizedPoint.js\";import{FeatureSnappingSourceInfo as b}from\"./FeatureSnappingSourceInfo.js\";import{sortCandidatesInPlace as x,screenDistance as C}from\"./snappingUtils.js\";import{DrapedEdgeSnappingCandidate as R}from\"./candidates/DrapedEdgeSnappingCandidate.js\";import{EdgeSnappingCandidate as M}from\"./candidates/EdgeSnappingCandidate.js\";import{FeatureSnappingCandidate as L}from\"./candidates/FeatureSnappingCandidate.js\";import{RightAngleSnappingCandidate as I}from\"./candidates/RightAngleSnappingCandidate.js\";import{vectorToScreenPoint as G}from\"../support/viewUtils.js\";let H=class extends t{get updating(){return this._snappingSources.some(e=>null==e?.valid||!0===e.valid&&!0===e.snappingSource?.updating)||this._updatingHandles.updating}constructor(e){super(e),this.options=null,this._domain=1,this._updatingHandles=new y,this._sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null},notes:{module:null,loader:null},scene:{module:null,loader:null}}}initialize(){const e=n(()=>this.options?._effectiveFeatureSources,(e,t)=>this._createSourceInfo(e,t));this._snappingSources=e,this.addHandles([a(e),o(()=>({rulesEnabled:!!this.options?.attributeRulesEnabled,sources:this._snappingSources.filter(r)}),({rulesEnabled:e,sources:t})=>{for(const r of t)r.attributeRulesEnabled=e},c)])}destroy(){this._set(\"options\",null),this._updatingHandles.destroy()}async fetchCandidates(e,t,r,a){if(!(t&this._domain&&null!=this.options&&this.options.effectiveFeatureEnabled))return[];const n=[],o=this._computeScreenSizeDistanceParameters(e,r);for(const s of this._snappingSources){if(!s?.valid||!s.snappingSource?.layerSource?.enabled||s.layerView?.suspended)continue;const t=s.getFetchCandidatesParameters(e,r,o);for(const e of t)n.push(s.snappingSource.fetchCandidates(e,a).then(e=>e.filter(e=>!this._candidateIsExcluded(s.snappingSource,e,r.excludeFeature))))}const c=(await s(n)).flat();return this._addRightAngleCandidates(c,e,o,r),i(a),x(e,c),c}_addRightAngleCandidates(e,t,r,a){const n=null!=a.vertexHandle?a.vertexHandle.rightSegment?.rightVertex?.pos:null!=a.editGeometryOperations&&\"polygon\"===a.editGeometryOperations.data.type?a.editGeometryOperations.data.parts[0]?.getFirstVertex()?.pos:null,s=null!=a.vertexHandle?a.vertexHandle.leftSegment?.leftVertex?.pos:null!=a.editGeometryOperations?a.editGeometryOperations.data.parts[0]?.getLastVertex()?.pos:null,{view:i}=this,o=w(n,i,a),c=w(s,i,a),u=e.length;for(let l=0;l<u;l++)this._addRightAngleCandidate(e[l],c,t,r,e),this._addRightAngleCandidate(e[l],o,t,r,e)}_addRightAngleCandidate(e,t,r,a,n){if(null==t||!P(e))return;const s=e.constraint.closestTo(t),i=(s[0]-r[0])/a.x,o=(s[1]-r[1])/a.y,{start:c,end:u}=e.constraint;if(i*i+o*o<=1){const r=m(j(s),j(c))>m(j(s),j(u))?c:u,a=new I({targetPoint:F(s),otherVertex:t,otherVertexType:0,previousVertex:r,constraint:new v(t,s),objectId:e.objectId,isDraped:e.isDraped,domain:1});n.push(a)}}_computeScreenSizeDistanceParameters(e,t){let r=null!=this.options?this.options.distance*(\"touch\"===t.pointer?this.options.touchSensitivityMultiplier:1):0;return null==this.view?{x:r,y:r,z:r,distance:r}:\"2d\"===this.view.type?(r*=this.view.resolution,{x:r,y:r,z:r,distance:r}):this._computeScreenSizeDistanceParameters3D(e,r,this.view,t)}_computeScreenSizeDistanceParameters3D(e,t,r,a){const{spatialReference:n}=a;r.renderCoordsHelper.toRenderCoords(e,n,O);const s=r.state.camera.computeScreenPixelSizeAt(O),i=s*r.renderCoordsHelper.unitInMeters,o=i/u(n),c=i/l(n),p=t*o,d=t*c,m=G(e,n,_,r),S=m?E(m,e,o,0,0,r,a):0,g=m?E(m,e,0,o,0,r,a):0,h=m?E(m,e,0,0,c,r,a):0;return{x:0===S?0:p/S,y:0===g?0:p/g,z:0===h?0:d/h,distance:s*t}}_candidateIsExcluded(e,t,r){if(null==r)return!1;const a=this._getCandidateObjectId(t);if(null==a)return!1;const n=e.layerSource.layer;return\"graphics\"===n.type?r.uid===a:r.sourceLayer===n&&(!(!r.attributes||!(\"objectIdField\"in n))&&r.attributes[n.objectIdField]===a)}_getCandidateObjectId(e){return e instanceof L?e.objectId:null}async _createSourceInfo(e,t){const r=e.layer;r.loaded||(await r.load(),i(t));const{view:a}=this,n=await this._createFeatureSnappingSourceType(e);return i(t),new b(null==n?{}:{snappingSource:n,view:a,layer:r})}async _createFeatureSnappingSourceType(e){switch(e.layer.type){case\"feature\":case\"geojson\":case\"csv\":case\"oriented-imagery\":case\"subtype-group\":case\"wfs\":return this._createFeatureSnappingSourceFeatureLayer(e);case\"graphics\":return this._createFeatureSnappingSourceGraphicsLayer(e);case\"map-notes\":return this._createFeatureSnappingSourceMapNotesLayer(e);case\"scene\":case\"building-scene\":return this._createFeatureSnappingSourceSceneLayer(e)}return null}async _createFeatureSnappingSourceSceneLayer(e){const{view:t}=this;if(null==t||\"3d\"!==t.type)return null;return new((await this._getSourceModule(\"scene\")).SceneLayerSnappingSource)({layerSource:e,view:t})}async _createFeatureSnappingSourceFeatureLayer(e){switch(e.layer.source?.type){case\"feature-layer\":case\"oriented-imagery\":return new((await this._getSourceModule(\"featureService\")).FeatureServiceSnappingSource)({spatialReference:this.spatialReference,view:this.view,layerSource:e});case\"memory\":case\"csv\":case\"geojson\":case\"wfs\":if(\"mesh\"===e.layer.geometryType)return null;return new((await this._getSourceModule(\"featureCollection\")).FeatureCollectionSnappingSource)({layerSource:e,view:this.view})}return null}async _createFeatureSnappingSourceGraphicsLayer(e){return new((await this._getSourceModule(\"graphics\")).GraphicsSnappingSource)({getGraphicsLayers:()=>[e.layer],spatialReference:this.spatialReference,view:this.view,layerSource:e})}async _createFeatureSnappingSourceMapNotesLayer(e){return new((await this._getSourceModule(\"notes\")).GraphicsSnappingSource)({getGraphicsLayers:()=>e.layer.sublayers?.toArray()??[],spatialReference:this.spatialReference,view:this.view,layerSource:e})}async _getSourceModule(e){const t=this._sourceModules[e];if(null==t.loader){const t=this._loadSourceModule(e),r={module:null,loader:t};this._sourceModules[e]=r;const a=await t,n={module:a,loader:t};return this._sourceModules[e]=n,a}return null==t.module?t.loader:t.module}_loadSourceModule(e){const t=this._updatingHandles;switch(e){case\"featureService\":return t.addPromise(import(\"./featureSources/FeatureServiceSnappingSource.js\"));case\"featureCollection\":return t.addPromise(import(\"./featureSources/FeatureCollectionSnappingSource.js\"));case\"graphics\":case\"notes\":return t.addPromise(import(\"./featureSources/GraphicsSnappingSource.js\"));case\"scene\":return t.addPromise(import(\"./featureSources/SceneLayerSnappingSource.js\"))}}get test(){}};function P(e){return(e instanceof M||e instanceof R)&&!z(e)}function z({constraint:{start:e,end:t}}){const r=g(e,t),a=m(j(e),j(t));return r<f()||a/r<A}function E(e,t,r,a,n,s,{spatialReference:i}){const o=S(U,t);o[0]+=r,o[1]+=a,o[2]+=n;const c=G(o,i,_,s);return c?C(c,e):1/0}e([p({constructOnly:!0})],H.prototype,\"spatialReference\",void 0),e([p({constructOnly:!0})],H.prototype,\"view\",void 0),e([p()],H.prototype,\"options\",void 0),e([p({readOnly:!0})],H.prototype,\"updating\",null),e([p()],H.prototype,\"_snappingSources\",void 0),H=e([d(\"esri.views.interactive.snapping.FeatureSnappingEngine\")],H);const O=h(),U=h(),A=1e-4;export{H as FeatureSnappingEngine};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{createTask as e}from\"./asyncUtils.js\";import t from\"./Collection.js\";import{removeIfHandle as o,destroyHandle as s}from\"./handleUtils.js\";import{isAborted as r,createAbortError as n,ignoreAbortErrors as i}from\"./promiseUtils.js\";import{on as a}from\"./reactiveUtils.js\";function c(e,o,s){const r=s?.createCollection?.()??new t,n=!!s?.recycleItems?new d:null,i=(e,t=0)=>{if(!e?.length)return;const o=r.splice(t,e.length);n?n.processRemoved(e):o.forEach(m)},c=(e,t=0)=>{if(!e?.length)return;const s=[];for(const r of e){const e=n?.use(r);if(e)s.push(e);else{const e=o(r);n?.register(r,e),s.push(e)}}r.addMany(s,t)},l=a(e,\"after-splice\",({added:e,start:t,removed:o})=>{i(o,t),c(e,t)},{sync:!0,onListenerRemove:e=>i(e.items),onListenerAdd:e=>c(e.items)});return r.addHandles(l),r}class d{constructor(){this._originalToMapped=new Map,this._removedItemCandidates=new Set,this._garbageCollectionQueued=!1}processRemoved(e){if(!e?.length)return;const{_removedItemCandidates:t}=this;for(const o of e)this._getItem(o)?.markRemoved()&&(t.add(o),this._queueGarbageCollection())}use(e){const t=this._getItem(e);return t&&(t.removed=!1),t?.item}register(e,t){this._originalToMapped.set(e,new l(t))}_getItem(e){return this._originalToMapped.get(e)}_queueGarbageCollection(){this._garbageCollectionQueued||(this._garbageCollectionQueued=!0,queueMicrotask(()=>this._garbageCollectCandidates()))}_garbageCollectCandidates(){this._garbageCollectionQueued=!1;const{_removedItemCandidates:e}=this,t=Array.from(e);e.clear(),t.forEach(e=>this._garbageCollectIfRemoved(e))}_garbageCollectIfRemoved(e){const{_originalToMapped:t}=this,o=this._getItem(e);o?.removed&&(m(o.item),t.delete(e))}}class l{constructor(e){this.item=e,this.removed=!1}markRemoved(){return this.removed=!0,!0}}function m(e){\"object\"==typeof e&&e&&(\"destroy\"in e&&\"function\"==typeof e.destroy?e.destroy():o(e))}function u(o,a,d){const l=new t,u=c(o,t=>e(async e=>{const o=await a(t,e);if(r(e))throw m(o),n();return o}),d),f=()=>null,g=async e=>{const t=await e.promise,o=u.indexOf(e);o<0||l.splice(o,1,t)};l.addMany(u.items.map(f));for(const e of u)i(g(e));const h=u.on(\"after-splice\",({added:e,start:t,deleteCount:o})=>{const s=l.splice(t,o);for(const r of s)m(r);if(e?.length){l.addMany(e.map(f),t);for(const t of e)i(g(t))}});return l.addHandles([s(u),h]),l}export{c as mapCollection,u as mapCollectionAsync};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nfunction o(o){const n=o.layer;if(\"floorInfo\"in n&&n.floorInfo?.floorField&&\"floors\"in o.view){return l(o.view.floors,n.floorInfo.floorField)}return null}function n(o,n){return\"floorInfo\"in n&&n.floorInfo?.floorField?l(o,n.floorInfo.floorField):null}function l(o,n){if(!o?.length)return null;const l=o.filter(o=>\"\"!==o).map(o=>`'${o}'`);return l.push(\"''\"),`${n} IN (${l.join(\",\")}) OR ${n} IS NULL`}export{o as getFloorFilterClause,n as getLayerFloorFilterClause};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import has from\"../../core/has.js\";function n(e){return e&&\"function\"==typeof e.highlight}function i(e){return e&&\"function\"==typeof e.maskOccludee}function r(e,n,i){return null==e||e>=i&&(0===n||e<=n)}function t(e,n){if(n&&e){const{minScale:i,maxScale:t}=e;if(c(i,t))return r(n,i,t)}return!0}function c(e,n){return null!=e&&e>0||null!=n&&n>0}function u(e){return!e?.minScale||!e.maxScale||e.minScale>=e.maxScale}const a=()=>!has(\"disable-feature:layer-based-scale-visibility\");function o(e){return null!=e&&\"object\"==typeof e&&\"createQuery\"in e&&\"queryFeatures\"in e&&\"layer\"in e&&\"view\"in e}function l(n,i,r){return new e(\"layerview:spatial-reference-incompatible\",`The spatial reference of this ${n} (wkid: ${i??\"undefined\"}) is incompatible with the spatial reference of the view (wkid: ${r??\"undefined\"}).`,{})}export{a as hasLayerBasedScaleVisibility,n as highlightsSupported,t as isInEffectiveScaleRange,c as isScaleRangeActive,o as isSelectableLayerView2D,i as occludeesSupported,r as scaleBoundsPredicate,l as spatialReferenceIncompatibleError,u as validateScaleRange};\n"],"names":["f","t","attributeRulesEnabled","e","this","_set","loadRules","layerView","_this$view","view","allLayerViews","find","layer","valid","_valid","snappingSource","r","subtypeFilter","_e$subtypes","_e$fieldsIndex$get$na","_e$fieldsIndex$get","p","subtypes","length","mode","filter","layerSource","sublayerSources","_this$view2","enabled","visible","y","scale","effectiveScaleRange","minScale","maxScale","map","subtypeCode","i","fieldsIndex","get","subtypeField","name","concat","getItemAt","join","floorFilter","u","constructor","super","rulesTable","initialize","addHandles","on","refresh","updating","l","availability","getFetchCandidatesParameters","_this$view$type","_this$view3","_f$sourceLayer","_this$view4","_this$view$map$utilit","o","a","_objectSpread","distance","type","point","coordinateHelper","returnEdge","vertexMode","m","where","s","n","feature","v","sourceLayer","parent","c","d","utilityNetworks","isUtilityLayer","_a$getFeatureSQL","_has","loadStatus","layerId","getFeatureSQL","anyVertex","endVertex","push","has","_t$map$utilityNetwork","_t$map$utilityNetwork2","_t$map$utilityNetwork3","_this$rulesTable","Promise","allSettled","load","getRulesTable","getLogger","error","title","remove","destroy","_this$snappingSource","constructOnly","prototype","value","H","_snappingSources","some","_e$snappingSource","_updatingHandles","options","_domain","_sourceModules","featureService","module","loader","featureCollection","graphics","notes","scene","_this$options","_effectiveFeatureSources","_createSourceInfo","_this$options2","rulesEnabled","sources","_ref","fetchCandidates","effectiveFeatureEnabled","_computeScreenSizeDistanceParameters","_s$snappingSource","_s$layerView","suspended","then","_candidateIsExcluded","excludeFeature","flat","_addRightAngleCandidates","x","_a$vertexHandle$right","_a$editGeometryOperat","_a$vertexHandle$leftS","_a$editGeometryOperat2","vertexHandle","rightSegment","rightVertex","pos","editGeometryOperations","data","parts","getFirstVertex","leftSegment","leftVertex","getLastVertex","w","_addRightAngleCandidate","M","R","_ref2","constraint","start","end","g","j","A","z","P","closestTo","I","targetPoint","F","otherVertex","otherVertexType","previousVertex","objectId","isDraped","domain","pointer","touchSensitivityMultiplier","resolution","_computeScreenSizeDistanceParameters3D","spatialReference","renderCoordsHelper","toRenderCoords","O","state","camera","computeScreenPixelSizeAt","unitInMeters","G","_","S","E","h","_getCandidateObjectId","uid","attributes","objectIdField","L","loaded","_createFeatureSnappingSourceType","b","_createFeatureSnappingSourceFeatureLayer","_createFeatureSnappingSourceGraphicsLayer","_createFeatureSnappingSourceMapNotesLayer","_createFeatureSnappingSourceSceneLayer","_getSourceModule","SceneLayerSnappingSource","_e$layer$source","source","FeatureServiceSnappingSource","geometryType","FeatureCollectionSnappingSource","GraphicsSnappingSource","getGraphicsLayers","_e$layer$sublayers$to","_e$layer$sublayers","sublayers","toArray","_loadSourceModule","addPromise","test","_ref3","U","C","readOnly","_s$createCollection","_s$createCollection2","createCollection","call","recycleItems","arguments","undefined","splice","processRemoved","forEach","use","register","addMany","added","removed","sync","onListenerRemove","items","onListenerAdd","_originalToMapped","Map","_removedItemCandidates","Set","_garbageCollectionQueued","_this$_getItem","_getItem","markRemoved","add","_queueGarbageCollection","item","set","queueMicrotask","_garbageCollectCandidates","Array","from","clear","_garbageCollectIfRemoved","delete","async","promise","indexOf","deleteCount","_n$floorInfo","floorInfo","floorField","floors","_n$floorInfo2","highlight"],"sourceRoot":""}