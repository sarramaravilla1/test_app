{"version":3,"file":"static/js/9386.067bdcb2.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/layers/StreamLayerView.js","../node_modules/@arcgis/core/views/2d/layers/StreamLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as s}from\"tslib\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../layers/support/FeatureFilter.js\";const r=r=>{const i=r;let n=class extends i{resume(){this._isUserPaused=!1,this.suspended||this._doResume()}pause(){this._isUserPaused=!0,this.suspended||this._doPause()}disconnect(){this._doDisconnect()}connect(){this._doConnect()}clear(){this._doClear()}constructor(...s){super(...s),this._isUserPaused=!1,this.filter=null}get connectionStatus(){return(this._isUserPaused||this.suspended)&&\"connected\"===this._streamConnectionStatus?\"paused\":this._streamConnectionStatus}_onSuspendedChange(s){s?this._doPause():this._isUserPaused||this._doResume()}};return s([e()],n.prototype,\"_isUserPaused\",void 0),s([e({readOnly:!0})],n.prototype,\"connectionStatus\",null),s([e({type:o})],n.prototype,\"filter\",void 0),n=s([t(\"esri.views.layers.StreamLayerView\")],n),n};export{r as StreamLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import r from\"../../../core/Error.js\";import{handlesGroup as t,makeHandle as s}from\"../../../core/handleUtils.js\";import{watch as n}from\"../../../core/reactiveUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import a from\"../../../rest/support/FeatureSet.js\";import{isNumber as c}from\"../../../support/guards.js\";import l from\"./FeatureLayerView2D.js\";import{handleNoEngineError as h}from\"./support/handleNoEngineError.js\";import{StreamLayerView as p}from\"../../layers/StreamLayerView.js\";let u=class extends(p(l)){constructor(){super(...arguments),this.pipelineConnectionStatus=\"disconnected\",this.pipelineErrorString=null}initialize(){this.addHandles([n(()=>this.layer.customParameters,async e=>{(await this.getWorker()).streamMessenger.updateCustomParameters(e)}),this.layer.on(\"send-message-to-socket\",async e=>{(await this.getWorker()).streamMessenger.sendMessageToSocket(e)}),this.layer.on(\"send-message-to-client\",async e=>{(await this.getWorker()).streamMessenger.sendMessageToClient(e),this._isUserPaused&&\"type\"in e&&\"clear\"===e.type&&this.incrementSourceRefreshVersion()}),n(()=>this.layer.purgeOptions,()=>this._update()),n(()=>this.suspended,this._onSuspendedChange.bind(this))],\"constructor\"),this._doResume()}destroy(){this._doPause()}get connectionError(){return this.pipelineErrorString?new r(\"stream-controller\",this.pipelineErrorString):null}on(e,r){if(Array.isArray(e))return t(e.map(e=>this.on(e,r)));const n=[\"data-received\",\"message-received\"].includes(e);n&&this.getWorker().then(r=>r.streamMessenger.enableEvent(e,!0));const o=super.on(e,r),i=this;return s(()=>{o.remove(),n&&(i._workerProxy.closed||i.hasEventListener(e)||i.getWorker().then(r=>r.streamMessenger.enableEvent(e,!1)))})}async queryLatestObservations(e,t){if(!(this.layer.timeInfo?.endField||this.layer.timeInfo?.startField||this.layer.timeInfo?.trackIdField))throw new r(\"streamlayer-no-timeField\",\"queryLatestObservation can only be used with services that define a TrackIdField\");const s=await this.getWorker();return h(s.features.executeQueryForLatestObservations(this._cleanUpQuery(e),t).then(e=>{const r=a.fromJSON(e);return r.features.forEach(e=>{e.layer=this.layer,e.sourceLayer=this.layer,e.origin=this.layer.graphicOrigin}),r}),new a({features:[]}))}detach(){super.detach(),this.pipelineConnectionStatus=\"disconnected\"}async queryObjectIds(e,r){return(await super.queryObjectIds(e,r)).filter(c)}get _streamConnectionStatus(){return this.pipelineConnectionStatus}_doPause(){null!=this._refreshInterval&&(clearInterval(this._refreshInterval),this._refreshInterval=null)}_doResume(){null==this._refreshInterval&&(this._refreshInterval=setInterval(()=>this.incrementSourceRefreshVersion(),this.layer.updateInterval))}_doDisconnect(){this.getWorker().then(e=>e.streamMessenger.disconnect()),this._doPause()}_doConnect(){this.getWorker().then(e=>e.streamMessenger.connect()),this.resume()}_doClear(){this.getWorker().then(e=>e.streamMessenger.clear()),null==this._refreshInterval&&this.incrementSourceRefreshVersion()}_createClientOptions(){const e=super._createClientOptions(),r=this;return{...e,get container(){return r.featureContainer},setProperty:e=>{this.set(e.propertyName,e.value)}}}};e([o()],u.prototype,\"pipelineConnectionStatus\",void 0),e([o()],u.prototype,\"pipelineErrorString\",void 0),e([o({readOnly:!0})],u.prototype,\"connectionError\",null),e([o({readOnly:!0})],u.prototype,\"_streamConnectionStatus\",null),u=e([i(\"esri.views.2d.layers.StreamLayerView2D\")],u);const d=u;export{d as default};\n"],"names":["r","i","n","resume","this","_isUserPaused","suspended","_doResume","pause","_doPause","disconnect","_doDisconnect","connect","_doConnect","clear","_doClear","constructor","super","arguments","filter","connectionStatus","_streamConnectionStatus","_onSuspendedChange","s","e","prototype","readOnly","type","o","t","u","p","l","pipelineConnectionStatus","pipelineErrorString","initialize","addHandles","layer","customParameters","async","getWorker","streamMessenger","updateCustomParameters","on","sendMessageToSocket","sendMessageToClient","incrementSourceRefreshVersion","purgeOptions","_update","bind","destroy","connectionError","Array","isArray","map","includes","then","enableEvent","remove","_workerProxy","closed","hasEventListener","queryLatestObservations","_this$layer$timeInfo","_this$layer$timeInfo2","_this$layer$timeInfo3","timeInfo","endField","startField","trackIdField","h","features","executeQueryForLatestObservations","_cleanUpQuery","a","fromJSON","forEach","sourceLayer","origin","graphicOrigin","detach","queryObjectIds","c","_refreshInterval","clearInterval","setInterval","updateInterval","_createClientOptions","_objectSpread","container","featureContainer","setProperty","set","propertyName","value","d"],"sourceRoot":""}