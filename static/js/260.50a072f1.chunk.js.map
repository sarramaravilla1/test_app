{"version":3,"file":"static/js/260.50a072f1.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/webdoc/support/saveUtils.js","../node_modules/@arcgis/core/portal/support/resourceUtils.js","../node_modules/@arcgis/core/core/accessorSupport/originUtils.js","../node_modules/@arcgis/core/webdoc/support/resourceUtils.js","../node_modules/@arcgis/core/layers/support/I3SIndexInfo.js","../node_modules/@arcgis/core/layers/support/schemaValidatorLoader.js","../node_modules/@arcgis/core/layers/mixins/SceneService.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{getLayersWithChartSupport as r}from\"../../layers/support/layerUtils.js\";async function o(e){const r=[];for(const o of e.allLayers)if(\"beforeSave\"in o&&\"function\"==typeof o.beforeSave){const e=o.beforeSave();e&&r.push(e)}await Promise.allSettled(r)}const t=new Set([\"layer:unsupported\",\"property:unsupported\",\"symbol:unsupported\",\"symbol-layer:unsupported\",\"url:unsupported\"]);function s(r,o,s){let n=(r.messages??[]).filter(({type:e})=>\"error\"===e).map(({name:r,message:o,details:t})=>new e(r,o,t));if(r.blockedRelativeUrls&&(n=n.concat(r.blockedRelativeUrls.map(r=>new e(\"url:unsupported\",`Relative url '${r}' is not supported`)))),s){const{ignoreUnsupported:e,supplementalUnsupportedErrors:r=[],requiredPropertyChecksDisabled:o}=s;e&&(n=n.filter(({name:e})=>!(t.has(e)||r.includes(e)))),o&&(n=n.filter(e=>\"web-document-write:property-required\"!==e.name))}if(n.length>0)throw new e(o.errorName,\"Failed to save due to unsupported or invalid content. See 'details.errors' for more detailed information\",{errors:n})}function n(e){return r(e).some(e=>!!e.charts?.length)}export{o as beforeSave,s as evaluateWriteErrors,n as hasCharts};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../core/Error.js\";import{join as r,getPathExtension as s}from\"../../core/urlUtils.js\";async function o(e,t={},s){await e.load(s);const o=r(e.itemUrl,\"resources\"),{start:a=1,num:n=10,sortOrder:c=\"asc\",sortField:l=\"resource\"}=t,i={query:{start:a,num:n,sortOrder:c,sortField:l,token:e.apiKey},signal:s?.signal},u=await e.portal.request(o,i);return{total:u.total,nextStart:u.nextStart,resources:u.resources.map(({created:t,size:r,resource:s})=>({created:new Date(t),size:r,resource:e.resourceFromPath(s)}))}}async function a(e,s,o,a){const n=new Map;for(const{resource:r,content:i,compress:u,access:p}of s){if(!r.hasPath())throw new t(`portal-item-resource-${o}:invalid-path`,\"Resource does not have a valid path\");const[e,s]=l(r.path),a=`${e}/${u??\"\"}/${p??\"\"}`;n.has(a)||n.set(a,{prefix:e,compress:u,access:p,files:[]});n.get(a).files.push({fileName:s,content:i})}await e.load(a);const c=r(e.userItemUrl,\"add\"===o?\"addResources\":\"updateResources\");for(const{prefix:t,compress:r,access:l,files:i}of n.values()){const s=25;for(let o=0;o<i.length;o+=s){const n=i.slice(o,o+s),u=new FormData;t&&\".\"!==t&&u.append(\"resourcesPrefix\",t),r&&u.append(\"compress\",\"true\"),l&&u.append(\"access\",l);let p=0;for(const{fileName:e,content:t}of n)u.append(\"file\"+ ++p,t,e);u.append(\"f\",\"json\"),await e.portal.request(c,{method:\"post\",body:u,signal:a?.signal})}}}async function n(e,s,o){if(!s.hasPath())throw new t(\"portal-item-resources-remove:invalid-path\",\"Resource does not have a valid path\");await e.load(o);const a=r(e.userItemUrl,\"removeResources\");await e.portal.request(a,{method:\"post\",query:{resource:s.path},signal:o?.signal}),s.portalItem=null}async function c(e,t){await e.load(t);const s=r(e.userItemUrl,\"removeResources\");return e.portal.request(s,{method:\"post\",query:{deleteAll:!0},signal:t?.signal})}function l(e){const t=e.lastIndexOf(\"/\");return-1===t?[\".\",e]:[e.slice(0,t),e.slice(t+1)]}function i(e){const[t,r]=u(e),[s,o]=l(t);return[s,o,r]}function u(e){const t=s(e);return null==t?[e,\"\"]:[e.slice(0,e.length-t.length-1),`.${t}`]}async function p(t){if(\"blob\"===t.type)return t.blob;if(\"json\"===t.type)return new Blob([t.jsonString],{type:\"application/json\"});return(await e(t.url,{responseType:\"blob\"})).data}function f(e,t){if(!e.hasPath())return null;const[s,,o]=i(e.path);return e.portalItem.resourceFromPath(r(s,t+o))}function m(e,t){if(!e.hasPath())return null;const[s,,o]=i(e.path);return e.portalItem.resourceFromPath(r(s,t+o))}export{a as addOrUpdateResources,p as contentToBlob,o as fetchResources,f as getSiblingOfSameType,m as getSiblingOfSameTypeI,c as removeAllResources,n as removeResource,i as splitPrefixFileNameAndExtension};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{isMultiOriginJSONMixin as r}from\"../multiOriginJSONSupportUtils.js\";function i(i){i?.writtenProperties&&i.writtenProperties.forEach(({target:i,propName:t,newOrigin:e})=>{r(i)&&e&&i.originOf(t)!==e&&i.updateOrigin(t,e)})}export{i as updateOrigins};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{allSettledErrors as t,throwIfAborted as r,eachAlways as o}from\"../../core/promiseUtils.js\";import{generateUUID as s}from\"../../core/uuid.js\";import{getSiblingOfSameTypeI as a,contentToBlob as c}from\"../../portal/support/resourceUtils.js\";async function p(e,t,r){const o=await u(e,t,r);await h(o,t,r)}async function n(e,t,r,o,s){const a=await u(r,o,s);await e.update({data:t}),await h(a,o,s)}async function u(o,p,n){if(!p?.resources)return;const u=p.portalItem===o.portalItem?new Set(o.paths):new Set;o.paths.length=0,o.portalItem=p.portalItem;const h=new Set(p.resources.toKeep.map(e=>e.resource.path)),i=new Set,m=[];h.forEach(e=>{u.delete(e),o.paths.push(e)});const f=[],l=[],w=[];for(const e of p.resources.toUpdate)if(u.delete(e.resource.path),h.has(e.resource.path)||i.has(e.resource.path)){const{resource:t,content:r,finish:p}=e,n=a(t,s());o.paths.push(n.path),f.push({resource:n,content:await c(r),compress:e.compress}),p&&w.push(()=>p(n))}else{o.paths.push(e.resource.path),l.push({resource:e.resource,content:await c(e.content),compress:e.compress});const t=e.finish;t&&w.push(()=>t(e.resource)),i.add(e.resource.path)}for(const e of p.resources.toAdd)if(o.paths.push(e.resource.path),u.has(e.resource.path))u.delete(e.resource.path);else{f.push({resource:e.resource,content:await c(e.content),compress:e.compress});const t=e.finish;t&&w.push(()=>t(e.resource))}if(f.length||l.length){const{addOrUpdateResources:e}=await import(\"../../portal/support/resourceUtils.js\");await e(p.portalItem,f,\"add\",n),await e(p.portalItem,l,\"update\",n)}if(w.forEach(e=>e()),0===m.length)return u;const d=await t(m);if(r(n),d.length>0)throw new e(\"save:resources\",\"Failed to save one or more resources\",{errors:d});return u}async function h(e,t,r){if(!e||!t.portalItem)return;const s=[];for(const o of e){const e=t.portalItem.resourceFromPath(o);s.push(e.portalItem.removeResource(e,r))}await o(s)}export{p as saveResources,n as updateItemWithResources};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import o from\"../../core/Error.js\";async function r(r,n,t,s,a,i,l){let d=null;if(null!=t){const o=`${r}/nodepages/`,n=o+Math.floor(t.rootIndex/t.nodesPerPage);try{return{type:\"page\",rootPage:(await e(n,{query:{f:\"json\",...s,token:a},responseType:\"json\",signal:l})).data,rootIndex:t.rootIndex,pageSize:t.nodesPerPage,lodMetric:t.lodSelectionMetricType,urlPrefix:o}}catch(g){null!=i&&i.warn(\"#fetchIndexInfo()\",\"Failed to load root node page. Falling back to node documents.\",n,g),d=g}}if(!n)return null;const p=n?.split(\"/\").pop(),c=`${r}/nodes/`,u=c+p;try{return{type:\"node\",rootNode:(await e(u,{query:{f:\"json\",...s,token:a},responseType:\"json\",signal:l})).data,urlPrefix:c}}catch(g){throw new o(\"sceneservice:root-node-missing\",\"Root node missing.\",{pageError:d,nodeError:g,url:u})}}export{r as fetchIndexInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nlet n=null;function t(t){n=t}function u(){return n}export{u as getLoader,t as registerLoader};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../../request.js\";import r from\"../../core/Error.js\";import o from\"../../core/Logger.js\";import{debounce as i}from\"../../core/promiseUtils.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import{reader as a}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as n}from\"../../core/accessorSupport/decorators/subclass.js\";import{updateOrigins as l}from\"../../core/accessorSupport/originUtils.js\";import p from\"../../geometry/Extent.js\";import c from\"../../geometry/HeightModelInfo.js\";import d from\"../../geometry/SpatialReference.js\";import{titleFromUrlAndName as m,parse as u,cleanTitle as h}from\"../support/arcgisLayerUrl.js\";import{id as y}from\"../support/commonProperties.js\";import{fetchIndexInfo as f}from\"../support/I3SIndexInfo.js\";import{urlProperty as v,normalizeParsedUrlObject as S}from\"../support/multiLayerServiceUtils.js\";import{getLoader as g}from\"../support/schemaValidatorLoader.js\";import w from\"../../portal/Portal.js\";import x from\"../../portal/PortalItem.js\";import{createForItemWrite as I}from\"../../portal/support/jsonContext.js\";import{saveResources as j,updateItemWithResources as b}from\"../../webdoc/support/resourceUtils.js\";import{evaluateWriteErrors as N}from\"../../webdoc/support/saveUtils.js\";const _=_=>{const A=_;let E=class extends A{constructor(){super(...arguments),this.spatialReference=null,this.fullExtent=null,this.heightModelInfo=null,this.minScale=0,this.maxScale=0,this.version={major:Number.NaN,minor:Number.NaN,versionString:\"\"},this.copyright=null,this.sublayerTitleMode=\"item-title\",this.title=null,this.layerId=null,this.url=null,this.indexInfo=null,this._debouncedSaveOperations=i(async(e,t,r)=>{switch(e){case 0:return this._save(t);case 1:return this._saveAs(r,t)}})}readSpatialReference(e,t){return L(t)}readFullExtent(e,t,r){if(null!=e&&\"object\"==typeof e){const o=null==e.spatialReference?{...e,spatialReference:L(t)}:e;return p.fromJSON(o,r)}const o=t.store,i=L(t);return null==i||null==o?.extent||!Array.isArray(o.extent)||o.extent.some(e=>e<R)?null:new p({xmin:o.extent[0],ymin:o.extent[1],xmax:o.extent[2],ymax:o.extent[3],spatialReference:i})}parseVersionString(e){const t={major:Number.NaN,minor:Number.NaN,versionString:e},r=e.split(\".\");return r.length>=2&&(t.major=parseInt(r[0],10),t.minor=parseInt(r[1],10)),t}readVersion(e,t){const r=t.store,o=null!=r.version?r.version.toString():\"\";return this.parseVersionString(o)}readTitlePortalItem(e){return\"item-title\"!==this.sublayerTitleMode?void 0:e}readTitleService(e,t){const r=this.portalItem?.title;if(\"item-title\"===this.sublayerTitleMode)return this.url?m(this.url,t.name):t.name;let o=t.name;if(!o&&this.url){const e=u(this.url);null!=e&&(o=e.title)}return\"item-title-and-service-name\"===this.sublayerTitleMode&&r&&(o=r+\" - \"+o),h(o)}get parsedUrl(){return S(this,{separator:\"layers\"})}async _fetchIndexAndUpdateExtent(e,t){this.indexInfo=f(this.parsedUrl?.path??\"\",this.rootNode,e,this.customParameters,this.apiKey,o.getLogger(this),t);const{fullExtent:r}=this;null==r||r.hasZ||this._updateExtent(r,await this.indexInfo)}_updateExtent(e,t){if(\"page\"===t?.type){const r=t.rootIndex%t.pageSize,o=t.rootPage?.nodes?.[r];O(e,o?.obb)}else if(\"node\"===t?.type){const r=t.rootNode?.mbs;if(!Array.isArray(r)||4!==r.length||r[0]<R)return;const o=r[2],i=r[3];e.zmin=o-i,e.zmax=o+i}}async _fetchService(e){if(null==this.url)throw new r(\"sceneservice:url-not-set\",\"Scene service can not be loaded without valid portal item or url\");if(null==this.layerId&&/SceneServer\\/*$/i.test(this.url)){const t=await this._fetchFirstLayerId(e);null!=t&&(this.layerId=t)}return this._fetchServiceLayer(e)}async _fetchFirstLayerId(e){const r=await t(this.url??\"\",{query:{f:\"json\",...this.customParameters,token:this.apiKey},responseType:\"json\",signal:e});if(r.data&&Array.isArray(r.data.layers)&&r.data.layers.length>0)return r.data.layers[0].id}async _fetchServiceLayer(e){const r=await t(this.parsedUrl?.path??\"\",{query:{f:\"json\",...this.customParameters,token:this.apiKey},responseType:\"json\",signal:e});r.ssl&&this.url&&(this.url=this.url.replace(/^http:/i,\"https:\"));let o=!1;if(r.data.layerType&&\"Voxel\"===r.data.layerType&&(o=!0),o)return this._fetchVoxelServiceLayer();const i=r.data;this.read(i,this._getServiceContext()),this.validateLayer(i)}async _fetchVoxelServiceLayer(e){const r=(await t(this.parsedUrl?.path+\"/layer\",{query:{f:\"json\",...this.customParameters,token:this.apiKey},responseType:\"json\",signal:e})).data;this.read(r,this._getServiceContext()),this.validateLayer(r)}_getServiceContext(){return{origin:\"service\",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl}}async _ensureLoadBeforeSave(){await this.load(),\"beforeSave\"in this&&\"function\"==typeof this.beforeSave&&await this.beforeSave()}validateLayer(e){}async _saveAs(e,t){const o={...P,...t};let i=x.from(e);if(!i)throw new r(\"sceneservice:portal-item-required\",\"_saveAs() requires a portal item to save to\");i.id&&(i=i.clone(),i.id=null);const s=i.portal||w.getDefault();await this._ensureLoadBeforeSave(),i.type=U,i.portal=s;const a=I(i,\"portal-item\",!0),n={layers:[this.write({},a)]};return await Promise.all(a.resources.pendingOperations??[]),await this._validateAgainstJSONSchema(n,a,o),this.url&&(i.url=this.url),i.title||(i.title=this.title),T(i,o,1),await s.signIn(),await s.user.addItem({item:i,folder:o?.folder,data:n}),await j(this.resourceReferences,a),this.portalItem=i,l(a),a.portalItem=i,i}async _save(e){const t={...P,...e};if(!this.portalItem)throw new r(\"sceneservice:portal-item-not-set\",\"Portal item to save to has not been set on this SceneService\");if(this.portalItem.type!==U)throw new r(\"sceneservice:portal-item-wrong-type\",`Portal item needs to have type \"${U}\"`);await this._ensureLoadBeforeSave();const o=I(this.portalItem,\"portal-item\",!0),i={layers:[this.write({},o)]};return await Promise.all(o.resources.pendingOperations??[]),await this._validateAgainstJSONSchema(i,o,t),this.url&&(this.portalItem.url=this.url),this.portalItem.title||(this.portalItem.title=this.title),T(this.portalItem,t,0),await b(this.portalItem,i,this.resourceReferences,o),l(o),this.portalItem}async _validateAgainstJSONSchema(e,t,i){const s=i?.validationOptions;N(t,{errorName:\"sceneservice:save\"},{ignoreUnsupported:s?.ignoreUnsupported,supplementalUnsupportedErrors:[\"scenemodification:unsupported\"]});const a=s?.enabled,n=g();if(a&&n){const t=(await n()).validate(e,i.portalItemLayerType);if(!t.length)return;const a=`Layer item did not validate:\\n${t.join(\"\\n\")}`;if(o.getLogger(this).error(`_validateAgainstJSONSchema(): ${a}`),\"throw\"===s.failPolicy){const e=t.map(e=>new r(\"sceneservice:schema-validation\",e));throw new r(\"sceneservice-validate:error\",\"Failed to save layer item due to schema validation, see `details.errors`.\",{validationErrors:e})}}}};return e([s(y)],E.prototype,\"id\",void 0),e([s({type:d})],E.prototype,\"spatialReference\",void 0),e([a(\"spatialReference\",[\"spatialReference\",\"store.indexCRS\",\"store.geographicCRS\"])],E.prototype,\"readSpatialReference\",null),e([s({type:p})],E.prototype,\"fullExtent\",void 0),e([a(\"fullExtent\",[\"fullExtent\",\"store.extent\",\"spatialReference\",\"store.indexCRS\",\"store.geographicCRS\"])],E.prototype,\"readFullExtent\",null),e([s({readOnly:!0,type:c})],E.prototype,\"heightModelInfo\",void 0),e([s({type:Number,json:{name:\"layerDefinition.minScale\",write:!0,origins:{service:{read:{source:\"minScale\"},write:!1}}}})],E.prototype,\"minScale\",void 0),e([s({type:Number,json:{name:\"layerDefinition.maxScale\",write:!0,origins:{service:{read:{source:\"maxScale\"},write:!1}}}})],E.prototype,\"maxScale\",void 0),e([s({readOnly:!0})],E.prototype,\"version\",void 0),e([a(\"version\",[\"store.version\"])],E.prototype,\"readVersion\",null),e([s({type:String,json:{read:{source:\"copyrightText\"}}})],E.prototype,\"copyright\",void 0),e([s({type:String,json:{read:!1}})],E.prototype,\"sublayerTitleMode\",void 0),e([s({type:String})],E.prototype,\"title\",void 0),e([a(\"portal-item\",\"title\")],E.prototype,\"readTitlePortalItem\",null),e([a(\"service\",\"title\",[\"name\"])],E.prototype,\"readTitleService\",null),e([s({type:Number,json:{origins:{service:{read:{source:\"id\"}},\"portal-item\":{write:{target:\"id\",isRequired:!0,ignoreOrigin:!0},read:!1}}}})],E.prototype,\"layerId\",void 0),e([s(v({separator:\"layers\"}))],E.prototype,\"url\",void 0),e([s({readOnly:!0})],E.prototype,\"parsedUrl\",null),e([s({readOnly:!0})],E.prototype,\"store\",void 0),e([s({type:String,readOnly:!0,json:{read:{source:\"store.rootNode\"}}})],E.prototype,\"rootNode\",void 0),E=e([n(\"esri.layers.mixins.SceneService\")],E),E},R=-1e38;function L(e){if(null!=e.spatialReference)return d.fromJSON(e.spatialReference);const t=e.store,r=t.indexCRS||t.geographicCRS,o=r&&parseInt(r.slice(r.lastIndexOf(\"/\")+1),10);return null!=o?new d(o):null}function O(e,t){if(null==t?.center||null==t.halfSize)throw new r(\"sceneservice:invalid-node-page\",\"Invalid node page.\");if(t.center[0]<R)return;const o=t.halfSize,i=t.center[2],s=Math.sqrt(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]);e.zmin=i-s,e.zmax=i+s}function T(e,t,r){e.typeKeywords||(e.typeKeywords=[]);const o=t.getTypeKeywords();for(const i of o)e.typeKeywords.push(i);e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter((e,t,r)=>r.indexOf(e)===t),1===r&&(e.typeKeywords=e.typeKeywords.filter(e=>\"Hosted Service\"!==e)))}const U=\"Scene Service\",P={getTypeKeywords:()=>[],portalItemLayerType:\"unknown\",validationOptions:{enabled:!0,ignoreUnsupported:!1,failPolicy:\"throw\"}};export{_ as SceneService,U as sceneServiceItemType,O as updateExtentFromPageObb};\n"],"names":["async","o","e","r","allLayers","beforeSave","push","Promise","allSettled","t","Set","s","_r$messages","n","messages","filter","_ref","type","map","_ref2","name","message","details","blockedRelativeUrls","concat","ignoreUnsupported","supplementalUnsupportedErrors","requiredPropertyChecksDisabled","_ref3","has","includes","length","errorName","errors","some","_e$charts","charts","arguments","undefined","load","itemUrl","start","a","num","sortOrder","c","sortField","l","i","query","token","apiKey","signal","u","portal","request","total","nextStart","resources","created","size","resource","Date","resourceFromPath","Map","content","compress","access","p","hasPath","path","set","prefix","files","get","fileName","userItemUrl","values","slice","FormData","append","method","body","portalItem","deleteAll","lastIndexOf","blob","Blob","jsonString","url","responseType","data","m","writtenProperties","forEach","target","propName","newOrigin","originOf","updateOrigin","h","update","paths","toKeep","delete","f","w","toUpdate","finish","add","toAdd","addOrUpdateResources","d","removeResource","Math","floor","rootIndex","nodesPerPage","rootPage","_objectSpread","pageSize","lodMetric","lodSelectionMetricType","urlPrefix","g","warn","split","pop","rootNode","pageError","nodeError","_","A","E","constructor","super","this","spatialReference","fullExtent","heightModelInfo","minScale","maxScale","version","major","Number","NaN","minor","versionString","copyright","sublayerTitleMode","title","layerId","indexInfo","_debouncedSaveOperations","_save","_saveAs","readSpatialReference","L","readFullExtent","fromJSON","store","extent","Array","isArray","R","xmin","ymin","xmax","ymax","parseVersionString","parseInt","readVersion","toString","readTitlePortalItem","readTitleService","_this$portalItem","parsedUrl","S","separator","_fetchIndexAndUpdateExtent","_this$parsedUrl$path","_this$parsedUrl","customParameters","getLogger","hasZ","_updateExtent","_t$rootPage","nodes","O","obb","_t$rootNode","mbs","zmin","zmax","_fetchService","test","_fetchFirstLayerId","_fetchServiceLayer","_this$url","layers","id","_this$parsedUrl$path2","_this$parsedUrl2","ssl","replace","layerType","_fetchVoxelServiceLayer","read","_getServiceContext","validateLayer","_this$parsedUrl3","_this$portalItem2","origin","_ensureLoadBeforeSave","_a$resources$pendingO","P","x","from","clone","getDefault","U","I","write","all","pendingOperations","_validateAgainstJSONSchema","T","signIn","user","addItem","item","folder","j","resourceReferences","_o$resources$pendingO","b","validationOptions","N","enabled","validate","portalItemLayerType","join","error","failPolicy","validationErrors","y","prototype","readOnly","json","origins","service","source","String","isRequired","ignoreOrigin","v","indexCRS","geographicCRS","center","halfSize","sqrt","typeKeywords","getTypeKeywords","indexOf"],"sourceRoot":""}