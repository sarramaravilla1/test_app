"use strict";(self.webpackChunktest_app=self.webpackChunktest_app||[]).push([[2633],{42633:(t,e,n)=>{n.d(e,{EG:()=>p,Ll:()=>Z,R3:()=>w,UH:()=>u,aM:()=>y,fs:()=>d,i0:()=>v});var o=n(89379),i=n(65256),s=n(53430),r=(n(63919),n(76386)),a=n(36693),c=n(67478);const u=",",l={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},f=new Set(["integer","small-integer"]);let m=null;function d(t){return(0,s.vE)(t)||(0,s.zD)(t)||(0,s.Ah)(t)}async function p(t){const{field:e,field2:n,field3:o,normalizationField:i,valueExpression:s,fields:a}=t;let c=[];if(s){if(!m){const{arcadeUtils:t}=await(0,r.l)();m=t}c=m.extractFieldNames(s)}return e&&c.push(e),n&&c.push(n),o&&c.push(o),i&&c.push(i),a&&c.push(...a),c}function g(t){return String(t).padStart(2,"0")}function h(t,e,n){let o;return"date"===e||"number"===e?("number"===e&&(t=new Date(t)),o="TIMESTAMP'".concat(n?t.getFullYear():t.getUTCFullYear(),"-").concat(g((n?t.getMonth():t.getUTCMonth())+1),"-").concat(g(n?t.getDate():t.getUTCDate())," ").concat(g(n?t.getHours():t.getUTCHours()),":").concat(g(n?t.getMinutes():t.getUTCMinutes()),":").concat(g(n?t.getSeconds():t.getUTCSeconds()),"'")):o=t,o}function y(t,e,n,o){const{hasQueryEngine:i}=t,s="(".concat(h(n,T(t,n),i)," - ").concat(h(e,T(t,e),i),")");let r=l[o],a="/";return r<1&&(r=1/r,a="*"),{sqlExpression:1===r?s:"(".concat(s," ").concat(a," ").concat(r,")"),sqlWhere:null}}function T(t,e){if(e instanceof Date)return"date";if("number"==typeof e)return"number";if("string"==typeof e){const n=t.getField(e);if("<now>"===e.toLowerCase())return;if((0,s.vE)(n))return"field"}}function w(t,e){const n=e&&t.getField(e);return!!n&&f.has(n.type)}function Z(t){return"cast(".concat(t," as float)")}function v(t,e){const{format:n,fieldFormat:s,timeZoneOptions:r,fieldType:u}=null!==e&&void 0!==e?e:{},l=s?(0,i._m)(s):null;let f,m;if(r&&({timeZone:f,timeZoneName:m}=(0,c.hv)(r.layerTimeZone,r.datesInUnknownTimezone,r.viewTimeZone,l||(0,i.J2)(n||"short-date-short-time"),u)),"string"==typeof t&&isNaN(Date.parse("time-only"===u?"1970-01-01T".concat(t,"Z"):t)))return t;switch(u){case"date-only":{const e=l||(0,i.J2)(n||"short-date");return"string"==typeof t?(0,i.iS)(t,(0,o.A)({},e)):(0,i.Yq)(t,(0,o.A)((0,o.A)({},e),{},{timeZone:a.n$}))}case"time-only":{const e=l||(0,i.J2)(n||"short-time");return"string"==typeof t?(0,i.F8)(t,e):(0,i.Yq)(t,(0,o.A)((0,o.A)({},e),{},{timeZone:a.n$}))}case"timestamp-offset":{if(!f&&"string"==typeof t&&new Date(t).toISOString()!==t)return t;const e=n||l||r?l||(0,i.J2)(n||"short-date-short-time"):void 0,s=e?(0,o.A)((0,o.A)({},e),{},{timeZone:f,timeZoneName:m}):void 0;return"string"==typeof t?(0,i.Ey)(t,s):(0,i.Yq)(t,s)}default:{const e=n||l||r?l||(0,i.J2)(n||"short-date-short-time"):void 0;return(0,i.Yq)("string"==typeof t?new Date(t):t,e?(0,o.A)((0,o.A)({},e),{},{timeZone:f,timeZoneName:m}):void 0)}}}}}]);
//# sourceMappingURL=2633.2a916e06.chunk.js.map