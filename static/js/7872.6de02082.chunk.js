"use strict";(self.webpackChunktest_app=self.webpackChunktest_app||[]).push([[7872],{2914:(e,t,r)=>{r.d(t,{i:()=>o});var n=r(19902),i=r(80963);function o(e,t,r){var o,s,a;const{geometry:u}=e,l=null!==(o=e.compactGeometryEnabled)&&void 0!==o&&o,c=e.toJSON();delete c.compactGeometryEnabled,delete c.defaultSpatialReferenceEnabled;const d=c;let h,f,y;if(u&&(f=u.spatialReference,y=(0,i.YX)(f),d.geometryType=(0,n.$B)(u),d.geometry=function(e,t){if(t&&"extent"===e.type)return"".concat(e.xmin,",").concat(e.ymin,",").concat(e.xmax,",").concat(e.ymax);if(t&&"point"===e.type)return"".concat(e.x,",").concat(e.y);const r=e.toJSON();return delete r.spatialReference,JSON.stringify(r)}(u,l),d.inSR=y),c.groupByFieldsForStatistics&&(d.groupByFieldsForStatistics=c.groupByFieldsForStatistics.join(",")),c.objectIds)switch(null===r||void 0===r||null===(s=r.uniqueIdFields)||void 0===s?void 0:s.length){case void 0:d.objectIds=c.objectIds.join(",");break;case 1:d.uniqueIds=JSON.stringify(c.objectIds),delete d.objectIds;break;default:d.uniqueIds=JSON.stringify(c.objectIds.map(e=>JSON.parse(e))),delete d.objectIds}if(c.orderByFields&&(d.orderByFields=c.orderByFields.join(",")),!c.outFields||!c.returnDistinctValues&&(null!==t&&void 0!==t&&t.returnCountOnly||null!==t&&void 0!==t&&t.returnExtentOnly||null!==t&&void 0!==t&&t.returnIdsOnly)?delete d.outFields:c.outFields.includes("*")?d.outFields="*":d.outFields=c.outFields.join(","),c.outSR?(d.outSR=(0,i.YX)(c.outSR),h=e.outSpatialReference):u&&(c.returnGeometry||c.returnCentroid)&&(d.outSR=d.inSR,h=f),c.returnGeometry&&delete c.returnGeometry,c.outStatistics&&(d.outStatistics=JSON.stringify(c.outStatistics)),c.fullText&&(d.fullText=JSON.stringify(c.fullText)),c.pixelSize&&(d.pixelSize=JSON.stringify(c.pixelSize)),c.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&null!=f&&null!=(null===(a=e.quantizationParameters)||void 0===a?void 0:a.extent)&&f.equals(e.quantizationParameters.extent.spatialReference)&&delete c.quantizationParameters.extent.spatialReference,d.quantizationParameters=JSON.stringify(c.quantizationParameters)),c.parameterValues&&(d.parameterValues=JSON.stringify(c.parameterValues)),c.rangeValues&&(d.rangeValues=JSON.stringify(c.rangeValues)),c.dynamicDataSource&&(d.layer=JSON.stringify({source:c.dynamicDataSource}),delete c.dynamicDataSource),c.timeExtent){const e=c.timeExtent,{start:t,end:r}=e;null==t&&null==r||(d.time=t===r?t:"".concat(null!==t&&void 0!==t?t:"null",",").concat(null!==r&&void 0!==r?r:"null")),delete c.timeExtent}return e.defaultSpatialReferenceEnabled&&null!=f&&null!=h&&f.equals(h)&&(d.defaultSR=d.inSR,delete d.inSR,delete d.outSR),d}},14009:(e,t,r)=>{r.d(t,{e:()=>l,s:()=>u});var n=r(89379),i=r(54994),o=r(36643),s=r(77725),a=r(97015);async function u(e,t,r,n){const i=await l(e,t,r,n);return s.A.fromJSON(i)}async function l(e,t,r,s){const u=(0,i.Dl)(e),l=(0,n.A)({},r),c=a.A.from(t),{data:d}=await(0,o.eW)(u,c,c.sourceSpatialReference,l,s);return d}},17872:(e,t,r)=>{r.d(t,{A:()=>O});var n=r(6326),i=r(91967),o=r(50076),s=r(81806),a=r(50346),u=r(90534),l=r(46053),c=(r(76460),r(47249),r(87990)),d=r(80963),h=r(19463),f=r(89551),y=r(54994),p=r(37713),m=r(89379),g=r(76797),S=r(36643),_=r(97015);var x=r(53104),v=r(14009),b=r(78469),F=r(77725);let O=class extends i.A{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.uniqueIdFields=null,this.url=null}get parsedUrl(){return(0,u.An)(this.url)}async execute(e,t){const r=await this.executeJSON(e,t);return this.featureSetFromJSON(e,r,t)}async executeJSON(e,t){var r;const n=this._normalizeQuery(e),i=null!=(null===(r=e.outStatistics)||void 0===r?void 0:r[0]),o=(0,s.A)("featurelayer-pbf-statistics"),a=(!i||o)&&!0!==e.returnTrueCurves;let u;if(this.pbfSupported&&a)try{u=await(0,b.S)(this.url,n,t,{uniqueIdFields:this.uniqueIdFields})}catch(l){if("query:parsing-pbf"!==l.name)throw l;this.pbfSupported=!1}return this.pbfSupported&&a||(u=await(0,v.e)(this.url,n,t,{uniqueIdFields:this.uniqueIdFields})),this._normalizeFields(u.fields),u}async featureSetFromJSON(e,t,n){if(!this._queryIs3DObjectFormat(e)||null==this.infoFor3D||!t.features)return F.A.fromJSON(t);const{meshFeatureSetFromJSON:i}=await(0,a.qr)(Promise.all([r.e(8105),r.e(9996),r.e(1821),r.e(164),r.e(3640)]).then(r.bind(r,10156)),n);return i(e,this.infoFor3D,t)}executeForCount(e,t){return(0,p.I)(this.url,this._normalizeQuery(e),t,{uniqueIdFields:this.uniqueIdFields})}executeForExtent(e,t){return async function(e,t,r){const n=(0,y.Dl)(e),i=await(0,S.Jf)(n,_.A.from(t),(0,m.A)({},r)),o=i.data.extent;return!o||isNaN(o.xmin)||isNaN(o.ymin)||isNaN(o.xmax)||isNaN(o.ymax)?{count:i.data.count,extent:null}:{count:i.data.count,extent:g.A.fromJSON(o)}}(this.url,this._normalizeQuery(e),t)}executeForIds(e,t){return(0,x.V)(this.url,this._normalizeQuery(e),t,{uniqueIdFields:this.uniqueIdFields})}async executeRelationshipQuery(e,t){const[{default:n},{executeRelationshipQuery:i}]=await(0,a.qr)(Promise.all([Promise.resolve().then(r.bind(r,58289)),r.e(9437).then(r.bind(r,69437))]),t);return e=n.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),i(this.url,e,t)}async executeRelationshipQueryForCount(e,t){const[{default:n},{executeRelationshipQueryForCount:i}]=await(0,a.qr)(Promise.all([Promise.resolve().then(r.bind(r,58289)),r.e(9437).then(r.bind(r,69437))]),t);return e=n.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),i(this.url,e,t)}async executeAttachmentQuery(e,t){const{executeAttachmentQuery:n,fetchAttachments:i,processAttachmentQueryResult:o}=await(0,a.qr)(r.e(5297).then(r.bind(r,55297)),t),s=(0,y.Dl)(this.url);return o(s,await(this.queryAttachmentsSupported?n(s,e,t):i(s,e,t)))}async executeAttributeBinsQuery(e,t){const{executeAttributeBinsQuery:n}=await(0,a.qr)(Promise.all([r.e(9729),r.e(6579)]).then(r.bind(r,56579)),t);return n(this.parsedUrl,e,t)}async executePivotQuery(e,t){const{executePivotQuery:n}=await(0,a.qr)(r.e(3273).then(r.bind(r,13273)),t);return n(this.parsedUrl,e,t)}async executeTopFeaturesQuery(e,t){const{executeTopFeaturesQuery:n}=await(0,a.qr)(r.e(3863).then(r.bind(r,63863)),t);return n(this.parsedUrl,e,this.sourceSpatialReference,t)}async executeForTopIds(e,t){const{executeForTopIds:n}=await(0,a.qr)(r.e(9119).then(r.bind(r,69119)),t);return n(this.parsedUrl,e,t)}async executeForTopExtents(e,t){const{executeForTopExtents:n}=await(0,a.qr)(r.e(2520).then(r.bind(r,12520)),t);return n(this.parsedUrl,e,t)}async executeForTopCount(e,t){const{executeForTopCount:n}=await(0,a.qr)(r.e(6406).then(r.bind(r,36406)),t);return n(this.parsedUrl,e,t)}_normalizeQuery(e){let t=_.A.from(e);t.sourceSpatialReference=t.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(t=t===e?t.clone():t,t.gdbVersion=e.gdbVersion||this.gdbVersion,t.dynamicDataSource=e.dynamicDataSource?f.L.from(e.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:r}=this;if(null!=r&&this._queryIs3DObjectFormat(e)){if(t=t===e?t.clone():t,t.formatOf3DObjects=(0,h.Hz)(r),!t.formatOf3DObjects)throw new o.A("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(t.outSpatialReference&&!(0,d.aI)(t.outSpatialReference,this.sourceSpatialReference))throw new o.A("query:unsupported-out-spatial-reference","3D object feature services do not support projection of geometries");if(null==t.outFields||!t.outFields.includes("*")){t=t===e?t.clone():t,null==t.outFields&&(t.outFields=[]);const{originX:n,originY:i,originZ:o,translationX:s,translationY:a,translationZ:u,scaleX:l,scaleY:c,scaleZ:d,rotationX:h,rotationY:f,rotationZ:y,rotationDeg:p}=r.transformFieldRoles;t.outFields.push(n,i,o,s,a,u,l,c,d,h,f,y,p)}}return t}_normalizeFields(e){if(null!=this.fieldsIndex&&null!=e)for(const t of e){const e=this.fieldsIndex.get(t.name);e&&Object.assign(t,e.toJSON())}}_queryIs3DObjectFormat(e){return null!=this.infoFor3D&&!0===e.returnGeometry&&"xyFootprint"!==e.multipatchOption&&!e.outStatistics}};(0,n.Cg)([(0,l.MZ)({type:f.L})],O.prototype,"dynamicDataSource",void 0),(0,n.Cg)([(0,l.MZ)()],O.prototype,"fieldsIndex",void 0),(0,n.Cg)([(0,l.MZ)()],O.prototype,"gdbVersion",void 0),(0,n.Cg)([(0,l.MZ)()],O.prototype,"infoFor3D",void 0),(0,n.Cg)([(0,l.MZ)({readOnly:!0})],O.prototype,"parsedUrl",null),(0,n.Cg)([(0,l.MZ)()],O.prototype,"pbfSupported",void 0),(0,n.Cg)([(0,l.MZ)()],O.prototype,"queryAttachmentsSupported",void 0),(0,n.Cg)([(0,l.MZ)()],O.prototype,"sourceSpatialReference",void 0),(0,n.Cg)([(0,l.MZ)()],O.prototype,"uniqueIdFields",void 0),(0,n.Cg)([(0,l.MZ)({type:String})],O.prototype,"url",void 0),O=(0,n.Cg)([(0,c.$)("esri.layers.graphics.sources.support.QueryTask")],O)},36643:(e,t,r)=>{r.d(t,{IJ:()=>f,Jf:()=>g,Pk:()=>p,eW:()=>h,gW:()=>m,kS:()=>y});var n=r(89379),i=r(3825),o=r(90534),s=r(1438),a=r(78238),u=r(89122),l=r(2914),c=r(57831);const d="Layer does not support extent calculation.";async function h(e,t,r,n,i){var o;const s=null!==(o=t.timeExtent)&&void 0!==o&&o.isEmpty?{data:{features:[]}}:await S(e,t,"json",n,void 0,i);return(0,c.q)(t,r,s.data),s}async function f(e,t,r,n,i){var o;if(null!==(o=t.timeExtent)&&void 0!==o&&o.isEmpty)return{data:r.createFeatureResult()};const s=await y(e,t,n,i),a=s;return a.data=(0,u.m)(s.data,r),a}function y(e,t,r,n){return S(e,t,"pbf",r,void 0,n)}function p(e,t,r,n){var i;return null!==(i=t.timeExtent)&&void 0!==i&&i.isEmpty?Promise.resolve({data:{objectIds:[]}}):S(e,t,"json",r,{returnIdsOnly:!0},n)}function m(e,t,r,n){var i;return null!==(i=t.timeExtent)&&void 0!==i&&i.isEmpty?Promise.resolve({data:{count:0}}):S(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0},n)}async function g(e,t,r){var n;if(null!==(n=t.timeExtent)&&void 0!==n&&n.isEmpty)return{data:{count:0,extent:null}};const i=await S(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}),o=i.data;if(o.hasOwnProperty("extent"))return i;if(o.features)throw new Error(d);if(o.hasOwnProperty("count"))throw new Error(d);return i}async function S(e,t,r){let u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const h="string"==typeof e?(0,o.An)(e):e,f=t.geometry?[t.geometry]:[],y=await(0,s.el)(f,null,{signal:u.signal}),p=null===y||void 0===y?void 0:y[0];null!=p&&((t=t.clone()).geometry=p);const m=(0,a.z)((0,n.A)((0,n.A)((0,n.A)({},h.query),{},{f:r},function(e,t){if(!e.returnIdsOnly||!t.uniqueIdFields)return e;const r=(0,n.A)((0,n.A)({},e),{},{returnUniqueIdsOnly:!0});return delete r.returnIdsOnly,r}(c,d)),(g=t,S=c,_=d,(0,l.i)(g,S,_))));var g,S,_;return(0,i.A)((0,o.fj)(h.path,function(e,t){return null!=e.formatOf3DObjects&&!(t.returnCountOnly||t.returnExtentOnly||t.returnIdsOnly)}(t,c)?"query3d":"query"),(0,n.A)((0,n.A)({},u),{},{responseType:"pbf"===r?"array-buffer":"json",query:(0,n.A)((0,n.A)({},m),u.query)}))}},37713:(e,t,r)=>{r.d(t,{I:()=>s});var n=r(54994),i=r(36643),o=r(97015);async function s(e,t,r,s){const a=(0,n.Dl)(e),{data:u}=await(0,i.gW)(a,o.A.from(t),r,s);return u.count}},53104:(e,t,r)=>{r.d(t,{V:()=>s});var n=r(54994),i=r(36643),o=r(97015);async function s(e,t,r,s){var u,l;const c=(0,n.Dl)(e),{data:d}=await(0,i.Pk)(c,o.A.from(t),r,s);return null!==(u=null!==(l=d.objectIds)&&void 0!==l?l:a(d.uniqueIds))&&void 0!==u?u:[]}function a(e){if(e)return function(e){return!Array.isArray(e[0])}(e)?e:e.map(e=>JSON.stringify(e))}},78238:(e,t,r)=>{function n(e){const t={};for(const r in e){if("declaredClass"===r)continue;const i=e[r];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){t[r]=[];for(let e=0;e<i.length;e++)t[r][e]=n(i[e])}else"object"==typeof i?i.toJSON&&(t[r]=JSON.stringify(i)):t[r]=i}return t}r.d(t,{z:()=>n})},78469:(e,t,r)=>{r.d(t,{S:()=>g});var n=r(89379),i=r(54994),o=r(30726),s=r(86729),a=r(98618);function u(e,t){return t}function l(e,t,r,n){switch(r){case 0:return f(e,t+n,0);case 1:return"lowerLeft"===e.originPosition?f(e,t+n,1):function(e,t,r){let{translate:n,scale:i}=e;return n[r]-t*i[r]}(e,t+n,1)}}function c(e,t,r,n){return 2===r?f(e,t,2):l(e,t,r,n)}function d(e,t,r,n){return 2===r?0===t?0:f(e,t,3):l(e,t,r,n)}function h(e,t,r,n){return 3===r?0===t?0:f(e,t,3):c(e,t,r,n)}function f(e,t,r){let{translate:n,scale:i}=e;return n[r]+t*i[r]}class y{constructor(e){this._options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=u,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._mValueOffset=null,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;const t=(0,s.N)(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(null!=t)for(const r of e.features)t(r.geometry)}createSpatialReference(){return{}}addField(e,t){const r=e.fields;(0,o.Lw)(r),r.push(t);const n=r.map(e=>e.name);this._attributesConstructor=function(){for(const e of n)this[e]=null}}addFeature(e,t){e.features.push(t)}prepareFeatures(e){switch(this._transform=e.transform,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._mValueOffset=null,this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&(this._mValueOffset=this._vertexDimension,this._vertexDimension++),e.geometryType){case"esriGeometryPoint":this.addCoordinate=(e,t,r)=>this.addCoordinatePoint(e,t,r),this.createGeometry=e=>this.createPointGeometry(e);break;case"esriGeometryPolygon":this.addCoordinate=(e,t,r)=>this._addCoordinatePolygon(e,t,r),this.createGeometry=e=>this._createPolygonGeometry(e);break;case"esriGeometryPolyline":this.addCoordinate=(e,t,r)=>this._addCoordinatePolyline(e,t,r),this.createGeometry=e=>this._createPolylineGeometry(e);break;case"esriGeometryMultipoint":this.addCoordinate=(e,t,r)=>this._addCoordinateMultipoint(e,t,r),this.createGeometry=e=>this._createMultipointGeometry(e)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,t,r){0===this._lengths.length&&(this._toAddInCurrentPath=t),this._lengths.push(t)}addQueryGeometry(e,t){const{queryGeometry:r,queryGeometryType:i}=t,o=this._transform?(0,a.Ch)(r.clone(),r,!1,!1,this._transform):r.clone(),s=(0,a.zv)(o,i,!1,!1);e.queryGeometryType=i,e.queryGeometry=(0,n.A)({},s)}createPointGeometry(e){const t={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(t.z=0),e.hasM&&(t.m=0),t}addCoordinatePoint(e,t,r){const n=this._transform;switch(t=this._applyTransform(n,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:"z"in e?e.z=t:e.m=t;break;case 3:e.m=t}}_transformPathLikeValue(e,t){let r=0;t<=1&&(r=this._previousCoordinate[t],this._previousCoordinate[t]+=e);const n=this._transform;return null!==this._mValueOffset&&0===e&&t>0&&!(t%this._mValueOffset)?0:this._applyTransform(n,e,t,r)}_addCoordinatePolyline(e,t,r){this._dehydratedAddPointsCoordinate(e.paths,t,r)}_addCoordinatePolygon(e,t,r){this._dehydratedAddPointsCoordinate(e.rings,t,r)}_addCoordinateMultipoint(e,t,r){0===r&&e.points.push([]);const n=this._transformPathLikeValue(t,r);e.points[e.points.length-1].push(n)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,t,r){0===r&&0===this._toAddInCurrentPath--&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const n=this._transformPathLikeValue(t,r),i=e[e.length-1];0===r&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),i.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=n}_deriveApplyTransform(e){const{hasZ:t,hasM:r}=e;return t&&r?h:t?c:r?d:l}}var p=r(36643),m=(r(77725),r(97015));async function g(e,t,r,o){const s=(0,i.Dl)(e),a=(0,n.A)({},r),u=m.A.from(t),l=!u.quantizationParameters,{data:c}=await(0,p.IJ)(s,u,new y({sourceSpatialReference:u.sourceSpatialReference,applyTransform:l}),a,o);return c}}}]);
//# sourceMappingURL=7872.6de02082.chunk.js.map