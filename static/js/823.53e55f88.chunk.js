"use strict";(self.webpackChunktest_app=self.webpackChunktest_app||[]).push([[823,2633],{24921:(t,e,n)=>{n.d(e,{GP:()=>f,LI:()=>c,lc:()=>u,u5:()=>s});n(11265);var o=n(50265);const i=/^-?(\d+)(\.(\d+))?$/i;function l(t,e){return t-e}function r(t,e){let n,o;return n=Number(t.toFixed(e)),n<t?o=n+1/10**e:(o=n,n-=1/10**e),n=Number(n.toFixed(e)),o=Number(o.toFixed(e)),[n,o]}function a(t,e,n,o,i){const l=s(t,e,n,o),r=null==l.previous||l.previous<=i,a=null==l.next||l.next<=i;return r&&a||l.previous+l.next<=2*i}function u(t){const e=String(t),n=e.match(i);if(null!==n&&void 0!==n&&n[1])return{integer:n[1].split("").length,fractional:n[3]?n[3].split("").length:0};if(e.toLowerCase().includes("e")){const t=e.split("e"),n=t[0],o=t[1];if(n&&o){const t=Number(n);let e=Number(o);const i=e>0;i||(e=Math.abs(e));const l=u(t);return i?(l.integer+=e,e>l.fractional?l.fractional=0:l.fractional-=e):(l.fractional+=e,e>l.integer?l.integer=1:l.integer-=e),l}}return{integer:0,fractional:0}}function s(t,e,n,o){const i={previous:null,next:null};if(null!=n){const o=t-n,l=e-n-o;i.previous=Math.floor(Math.abs(100*l/o))}if(null!=o){const n=o-t,l=o-e-n;i.next=Math.floor(Math.abs(100*l/n))}return i}function c(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.slice(),{tolerance:o=2,strictBounds:i=!1,indexes:s=n.map((t,e)=>e)}=e;s.sort(l);for(let l=0;l<s.length;l++){const t=s[l],e=n[t],c=0===t?null:n[t-1],d=t===n.length-1?null:n[t+1],f=u(e).fractional;if(f){let u,s=0,m=!1;for(;s<=f&&!m;){const t=r(e,s);u=i&&0===l?t[1]:t[0],m=a(e,u,c,d,o),s++}m&&(n[t]=u)}}return n}const d={maximumFractionDigits:20};function f(t){return(0,o.ZV)(t,d)}},42633:(t,e,n)=>{n.d(e,{EG:()=>v,Ll:()=>w,R3:()=>F,UH:()=>s,aM:()=>h,fs:()=>m,i0:()=>T});var o=n(89379),i=n(65256),l=n(53430),r=(n(63919),n(76386)),a=n(36693),u=n(67478);const s=",",c={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},d=new Set(["integer","small-integer"]);let f=null;function m(t){return(0,l.vE)(t)||(0,l.zD)(t)||(0,l.Ah)(t)}async function v(t){const{field:e,field2:n,field3:o,normalizationField:i,valueExpression:l,fields:a}=t;let u=[];if(l){if(!f){const{arcadeUtils:t}=await(0,r.l)();f=t}u=f.extractFieldNames(l)}return e&&u.push(e),n&&u.push(n),o&&u.push(o),i&&u.push(i),a&&u.push(...a),u}function p(t){return String(t).padStart(2,"0")}function g(t,e,n){let o;return"date"===e||"number"===e?("number"===e&&(t=new Date(t)),o="TIMESTAMP'".concat(n?t.getFullYear():t.getUTCFullYear(),"-").concat(p((n?t.getMonth():t.getUTCMonth())+1),"-").concat(p(n?t.getDate():t.getUTCDate())," ").concat(p(n?t.getHours():t.getUTCHours()),":").concat(p(n?t.getMinutes():t.getUTCMinutes()),":").concat(p(n?t.getSeconds():t.getUTCSeconds()),"'")):o=t,o}function h(t,e,n,o){const{hasQueryEngine:i}=t,l="(".concat(g(n,y(t,n),i)," - ").concat(g(e,y(t,e),i),")");let r=c[o],a="/";return r<1&&(r=1/r,a="*"),{sqlExpression:1===r?l:"(".concat(l," ").concat(a," ").concat(r,")"),sqlWhere:null}}function y(t,e){if(e instanceof Date)return"date";if("number"==typeof e)return"number";if("string"==typeof e){const n=t.getField(e);if("<now>"===e.toLowerCase())return;if((0,l.vE)(n))return"field"}}function F(t,e){const n=e&&t.getField(e);return!!n&&d.has(n.type)}function w(t){return"cast(".concat(t," as float)")}function T(t,e){const{format:n,fieldFormat:l,timeZoneOptions:r,fieldType:s}=null!==e&&void 0!==e?e:{},c=l?(0,i._m)(l):null;let d,f;if(r&&({timeZone:d,timeZoneName:f}=(0,u.hv)(r.layerTimeZone,r.datesInUnknownTimezone,r.viewTimeZone,c||(0,i.J2)(n||"short-date-short-time"),s)),"string"==typeof t&&isNaN(Date.parse("time-only"===s?"1970-01-01T".concat(t,"Z"):t)))return t;switch(s){case"date-only":{const e=c||(0,i.J2)(n||"short-date");return"string"==typeof t?(0,i.iS)(t,(0,o.A)({},e)):(0,i.Yq)(t,(0,o.A)((0,o.A)({},e),{},{timeZone:a.n$}))}case"time-only":{const e=c||(0,i.J2)(n||"short-time");return"string"==typeof t?(0,i.F8)(t,e):(0,i.Yq)(t,(0,o.A)((0,o.A)({},e),{},{timeZone:a.n$}))}case"timestamp-offset":{if(!d&&"string"==typeof t&&new Date(t).toISOString()!==t)return t;const e=n||c||r?c||(0,i.J2)(n||"short-date-short-time"):void 0,l=e?(0,o.A)((0,o.A)({},e),{},{timeZone:d,timeZoneName:f}):void 0;return"string"==typeof t?(0,i.Ey)(t,l):(0,i.Yq)(t,l)}default:{const e=n||c||r?c||(0,i.J2)(n||"short-date-short-time"):void 0;return(0,i.Yq)("string"==typeof t?new Date(t):t,e?(0,o.A)((0,o.A)({},e),{},{timeZone:d,timeZoneName:f}):void 0)}}}},60823:(t,e,n)=>{n.d(e,{Dd:()=>m,Zo:()=>v,getFormatOptionsForVisualVariable:()=>F,iz:()=>w});n(11265);var o=n(18288),i=n(78083),l=n(31933),r=n(17542),a=n(24921),u=n(42633),s=n(7246),c=n(50265);const d="<",f=">";function m(t,e,n,o){let i="";0===e?i="".concat(d," "):e===n&&(i="".concat(f," "));const l=function(t,e){if(null==t)return t;const{fieldType:n,format:o,fieldFormat:i,timeZoneOptions:l}=e||{};if(h(n))return(0,u.i0)(t,{fieldType:n,format:null===o||void 0===o?void 0:o.dateFormat,fieldFormat:"date-time"===(null===i||void 0===i?void 0:i.type)?i:void 0,timeZoneOptions:l});if("string"==typeof t&&function(t){const{format:e,fieldFormat:n}=t||{};return"number"===(null===n||void 0===n?void 0:n.type)||!!e&&null==e.dateFormat&&(null!=e.places||null!=e.digitSeparator)}(e)){const e=Number(t);isNaN(e)||(t=e)}if("string"==typeof t)return t;const r="number"===(null===i||void 0===i?void 0:i.type)?(0,c.Up)(i):o?(0,c.yx)(o):void 0;return r?(0,c.ZV)(t,r):(0,a.GP)(t)}(t,o);return null==l?"":i+l}async function v(t,e){const o=t.trailCap,i=t.trailWidth||1,l=e||await async function(t){var e;if(!("visualVariables"in t)||!t.visualVariables)return null;const o=t.visualVariables.find(t=>"color"===t.type);if(!o)return null;let i=null,l=null;if(o.stops){if(1===o.stops.length)return o.stops[0].color;i=o.stops[0].value,l=o.stops[o.stops.length-1].value}const r=null!=i&&null!=l?i+(l-i)/2:0,{getColor:a}=await Promise.resolve().then(n.bind(n,15492));return null!==(e=a(o,r))&&void 0!==e?e:null}(t)||t.color;return new s.A({cap:o,color:l,width:i})}function p(t,e){var n;const o="popupTemplate"in t?null===(n=t.popupTemplate)||void 0===n?void 0:n.fieldInfos:null;if(null!==o&&void 0!==o&&o.length&&e)return o.find(t=>{var n;return(null===(n=t.fieldName)||void 0===n?void 0:n.toLowerCase())===e.toLowerCase()})}function g(t){var e,n,i,l,r,a;let u=0,s=0;return t.stops?(u=null!==(e=null===(n=t.stops)||void 0===n||null===(n=n.at(0))||void 0===n?void 0:n.value)&&void 0!==e?e:u,s=null!==(i=null===(l=t.stops)||void 0===l||null===(l=l.at(-1))||void 0===l?void 0:l.value)&&void 0!==i?i:s):"minDataValue"in t&&"maxDataValue"in t&&(u=null!==(r=t.minDataValue)&&void 0!==r?r:u,s=null!==(a=t.maxDataValue)&&void 0!==a?a:s),s-u>2*o.vf.days?"short-date":"short-date-short-time"}function h(t){return["date","date-only","time-only","timestamp-offset"].includes(t||"")}function y(t){return(0,l.jy)(t)&&!("featureReduction"in t&&t.featureReduction)}function F(t,e,n){var o,l;const a=function(t,e,n){var o,i;const l=function(t,e){var n,o;if(!e)return null;if("featureReduction"in t)switch(null===(n=t.featureReduction)||void 0===n?void 0:n.type){case"cluster":case"binning":{const n=t.featureReduction.fields.find(t=>{let{name:n}=t;return n.toLowerCase()===e.toLowerCase()});return n&&"getField"in t?t.getField(n.onStatisticField):null}}return"getField"in t?null===(o=t.getField)||void 0===o?void 0:o.call(t,e):null}(t,e),r=null===l||void 0===l?void 0:l.name;if(!r)return null;const a=null===l||void 0===l?void 0:l.type,u=y(t);return{fieldType:a,format:u?null:null===(o=p(t,r))||void 0===o?void 0:o.format,fieldFormat:u?null===(i=t.getFieldConfiguration(r))||void 0===i?void 0:i.fieldFormat:null,timeZoneOptions:h(a)?{layerTimeZone:"preferredTimeZone"in t?t.preferredTimeZone:null,viewTimeZone:n,datesInUnknownTimezone:"datesInUnknownTimezone"in t&&t.datesInUnknownTimezone}:null}}(t,e.field,n);return a?(h(a.fieldType)&&(y(t)?null!==(o=a.fieldFormat)&&void 0!==o||(a.fieldFormat=new i.A({dateStyle:"short",timeStyle:"short-date-short-time"===g(e)?"short":null})):null!==(l=a.format)&&void 0!==l||(a.format=new r.A({dateFormat:g(e)}))),a):null}function w(t,e){var n;if("authoringInfo"in t)return null===(n=t.authoringInfo)||void 0===n||null===(n=n.visualVariables)||void 0===n?void 0:n.find(t=>{let{theme:n}=t;return n===e})}}}]);
//# sourceMappingURL=823.53e55f88.chunk.js.map