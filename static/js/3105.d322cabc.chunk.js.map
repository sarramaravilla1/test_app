{"version":3,"file":"static/js/3105.d322cabc.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/layers/support/RouteLayerInteraction.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import r from\"../../../../core/Accessor.js\";import{destroyHandle as t}from\"../../../../core/handleUtils.js\";import{destroyMaybe as o}from\"../../../../core/maybe.js\";import{watch as s,initial as i}from\"../../../../core/reactiveUtils.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{UpdatingHandles as p}from\"../../../../core/support/UpdatingHandles.js\";import n from\"../../../../layers/GraphicsLayer.js\";import c from\"../../../../rest/support/PointBarrier.js\";import h from\"../../../../rest/support/PolygonBarrier.js\";import y from\"../../../../rest/support/PolylineBarrier.js\";import d from\"../../../../rest/support/Stop.js\";import m from\"../../../../widgets/Sketch/SketchViewModel.js\";function g(e,r){e.networkFeature=r}function u(e){const r=w(e.graphic);return{...e,networkFeature:r}}function b(e){const r=e.graphics.map(e=>w(e));return{...e,networkFeatures:r}}function w(e){return e.networkFeature}function k(e){return\"point\"===e?.type||\"polyline\"===e?.type||\"polygon\"===e?.type}let _=class extends r{constructor(e){super(e),this._createMode=null,this._graphicsLayer=new n({internal:!0,listMode:\"hide\",title:\"RouteLayerInteraction layer\"}),this._updatingHandles=new p,this.enabled=!0,this._handleSketchViewModelEvents=async e=>{switch(e.type){case\"update\":switch(e.state){case\"active\":case\"complete\":for(const r of e.graphics){w(r).geometry=k(r.geometry)?r.geometry.clone():null}}break;case\"undo\":case\"redo\":break;case\"delete\":for(const r of e.graphics){const e=w(r);this._removeNetworkFeature(e)}break;case\"create\":if(e.graphic&&\"complete\"===e.state&&this._createMode){const r=e.graphic.geometry?.clone(),t=e.graphic.symbol?.clone();if(!r)break;switch(this._createMode){case\"stop\":{if(\"point\"!==r.type)break;const{stops:t}=this.layer;if(t.length>0&&t.every(({geometry:e})=>!e)){t.at(0).geometry=r;break}if(t.length>1&&t.filter((e,r)=>0!==r).every(({geometry:e})=>!e)){t.at(1).geometry=r;break}const o=new d({geometry:r});t.add(o),g(e.graphic,o);break}case\"point-barrier\":{if(\"point\"!==r.type)break;const o=new c({geometry:r,symbol:t});this.layer.pointBarriers.add(o),g(e.graphic,o);break}case\"polyline-barrier\":{if(\"polyline\"!==r.type)break;const o=new y({geometry:r,symbol:t});this.layer.polylineBarriers.add(o),g(e.graphic,o);break}case\"polygon-barrier\":{if(\"polygon\"!==r.type)break;const o=new h({geometry:r,symbol:t});this.layer.polygonBarriers.add(o),g(e.graphic,o);break}}}}(await this.view.whenLayerView(this.layer)).emit(e.type,\"create\"===e.type?u(e):b(e))}}initialize(){this._sketchViewModel=new m({layer:this._graphicsLayer,view:this.view}),this.addHandles([s(()=>this.enabled,e=>{e?this._activate():this._deactivate()},i),s(()=>{const{stops:e,pointBarriers:r,polylineBarriers:t,polygonBarriers:o}=this.layer;return{stops:e,pointBarriers:r,polylineBarriers:t,polygonBarriers:o}},()=>{this.enabled&&this._loadClonedGraphics()}),this._sketchViewModel.on([\"create\",\"delete\",\"redo\",\"undo\",\"update\"],this._handleSketchViewModelEvents),t(this._updatingHandles)])}destroy(){this.view.map.remove(this._graphicsLayer),this._graphicsLayer.removeAll(),this._graphicsLayer=o(this._graphicsLayer),this._sketchViewModel=o(this._sketchViewModel)}get selectedNetworkFeatures(){return this._sketchViewModel.updateGraphics.map(e=>w(e))}get updating(){return this._updatingHandles.updating}create(e){switch(this._createMode=e,e){case\"stop\":this.layer.defaultSymbols.stops?.unlocated&&(this._sketchViewModel.pointSymbol=this.layer.defaultSymbols.stops.unlocated.clone());break;case\"point-barrier\":this.layer.defaultSymbols.pointBarriers&&(this._sketchViewModel.pointSymbol=this.layer.defaultSymbols.pointBarriers.clone());break;case\"polyline-barrier\":this.layer.defaultSymbols.polylineBarriers&&(this._sketchViewModel.polylineSymbol=this.layer.defaultSymbols.polylineBarriers.clone());break;case\"polygon-barrier\":this.layer.defaultSymbols.polygonBarriers&&(this._sketchViewModel.polygonSymbol=this.layer.defaultSymbols.polygonBarriers.clone())}switch(e){case\"stop\":case\"point-barrier\":return this._sketchViewModel.create(\"point\");case\"polyline-barrier\":return this._sketchViewModel.create(\"polyline\");case\"polygon-barrier\":return this._sketchViewModel.create(\"polygon\")}}remove(e){const r=this._graphicsLayer.graphics.find(r=>w(r)===e);r&&this._graphicsLayer.remove(r),this._removeNetworkFeature(e)}_activate(){this._loadClonedGraphics(),this.view.map.add(this._graphicsLayer)}_deactivate(){this._sketchViewModel.cancel(),this.view.map?.remove(this._graphicsLayer),this._graphicsLayer.removeAll()}_loadClonedGraphics(){const e=[this.layer.stops,this.layer.pointBarriers,this.layer.polylineBarriers,this.layer.polygonBarriers].flatMap(e=>e.toArray().map(e=>{const r=e.toGraphic();return r.networkFeature=e,r}));this._graphicsLayer.removeAll().addMany(e)}_removeNetworkFeature(e){switch(e.type){case\"stop\":this.layer.stops.remove(e);break;case\"point-barrier\":this.layer.pointBarriers.remove(e);break;case\"polyline-barrier\":this.layer.polylineBarriers.remove(e);break;case\"polygon-barrier\":this.layer.polygonBarriers.remove(e)}}};e([a()],_.prototype,\"enabled\",void 0),e([a({constructOnly:!0})],_.prototype,\"layer\",void 0),e([a({readOnly:!0})],_.prototype,\"selectedNetworkFeatures\",null),e([a()],_.prototype,\"updating\",null),e([a({constructOnly:!0})],_.prototype,\"view\",void 0),_=e([l(\"esri.views.2d.layers.support.RouteLayerInteraction\")],_);export{_ as RouteLayerInteraction};\n"],"names":["g","e","r","networkFeature","w","k","type","_","constructor","super","this","_createMode","_graphicsLayer","n","internal","listMode","title","_updatingHandles","p","enabled","_handleSketchViewModelEvents","async","state","graphics","geometry","clone","_removeNetworkFeature","graphic","_e$graphic$geometry","_e$graphic$symbol","t","symbol","stops","layer","length","every","_ref","at","filter","_ref2","o","d","add","c","pointBarriers","y","polylineBarriers","h","polygonBarriers","view","whenLayerView","emit","_objectSpread","u","map","networkFeatures","b","initialize","_sketchViewModel","m","addHandles","s","_activate","_deactivate","i","_loadClonedGraphics","on","destroy","remove","removeAll","selectedNetworkFeatures","updateGraphics","updating","create","_this$layer$defaultSy","defaultSymbols","unlocated","pointSymbol","polylineSymbol","polygonSymbol","find","_this$view$map","cancel","flatMap","toArray","toGraphic","addMany","a","prototype","constructOnly","readOnly","l"],"sourceRoot":""}